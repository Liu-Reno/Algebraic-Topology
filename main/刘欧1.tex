\chapter{范畴论回顾, 方便的空间范畴}
\begin{introduction}
    \item \textbf{范畴论} 是一门数学分支, 最开始由 MacLane 引入以解释自然变换的``自然性''.请读者回忆有限维向量空间 $V$ 与其双重对偶 $(V^{\lor})^{\lor}$ 的自然同构 $\ev_V : V \simeq (V^{\lor})^{\lor}$, 在线性代数中, 我们称该同构是``自然的'', 或 ``典范的'', 以 $\ev_V$ 为例, 一般而言, 可以如下来理解自然性
    
\begin{enumerate}
    \item 它不依赖于基的选取, 事实上, 可以直接写下它的公式 $\ev_V(v) = \left<-,v\right>\colon V^{\lor} \to F$, 这并不需要任意诸如有序基的辅助信息.
    \item 它与线性映射的结构是兼容的, 即
    \[\begin{tikzcd}
	V & W \\
	{V^{\lor \lor}} & {W^{\lor \lor}}
	\arrow["T", from=1-1, to=1-2]
	\arrow["{\ev_V}"', from=1-1, to=2-1]
	\arrow["{\ev_W}", from=1-2, to=2-2]
	\arrow["{T^{\lor \lor}}"', from=2-1, to=2-2]
    \end{tikzcd}\]
\end{enumerate}

\item 范畴论的原理是将不同数学分支的数学理论抽象出来, 只保留两种信息: 数学对象, 以及其间态射(我们所关心的箭头, 或者说是相容的箭头, 例如在我们关心拓扑空间时, 所考虑的箭头即为连续映射, 在关心概形时, 所考虑的箭头往往为概形间的态射). 由此我们可以解释自然或者典范.\\
在考虑从结构 $A$ 中得到结构 $B$ 的信息时(或者说从范畴 $\cal{C}$ 中得到范畴 $\cal{D}$ 的信息, 比方说你考虑带点拓扑空间 $(E,e)$ 的基本群 $\pi_1((E,e))$ 时), 我们就需要用到函子的概念, 上述例子给出了一个函子 $\cate{Top}_{\star} \to \cate{Grp}$(例~\ref{例:范畴}), 更为经典的使用函子的例子是 Brouwer 不动点的证明, 可见定理~\ref{定理:Brouwer}.\\
当然, 函子可能具有一些诸如伴随, 保(余)极限, 可表等性质具体内容我们将在后文进行讨论.\\

\item 在一切开始之前, 我们还需要进行一个观察:
在讨论群的时候, 我们经常认为同构的群是一致的; 在讨论拓扑空间的时候, 我们经常认为同胚的拓扑空间就是一致的.
所以同构/同胚是一种在对应结构中所适用的等号(在对应的代数结构中它往往比严格相等更加有用).因此在范畴论中, 我们自然而然的提出一个朴素观点: \textbf{以同构代替严格等式}.\footnote{当然, 在类型论中, 直接在类型里提出相等类型的概念, 具体分为赋值相等和命题相等, 在此不做过多探讨, 感兴趣的读者请参看类型论相关资料.}

\item 考虑到讨论班参加成员均为初学者, 本文将不会过多讨论 Grothendieck 宇宙的内容, 本文选定一个 Grothendieck 宇宙 $\mathcal{U}$ 若无额外说明, 我们统一认定为小范畴, 即 $\Obj$ 与 $\Mor$ 均为 $\cal{U}$-小集合(即落在 $\cal{U}$ 内)的情况.
\end{introduction}

\begin{flushright}\begin{minipage}{0.3 \textwidth}
	\begin{tabular}{c}
		{作者: \kaishu 红糖} \\
		2024.9  
	\end{tabular}
\end{minipage}\end{flushright}
本章主要参考\cite[7. 一个好用的空间范畴]{李思},\cite[第二章, 第三章]{李文威卷一},\cite[第一章]{李文威卷二},\cite[Chapter 1]{Kerodon},\cite{HTT},\cite[对应词条]{BananaSpace}, \cite[对应词条]{nlab:homepage},\cite{CisinskiFormalization},\cite{陈麟}.以及一些个人理解.

\section{范畴, 函子, 自然变换}

本节来介绍基础的范畴与函子概念
\subsection{范畴}
粗略来说, 范畴就是一些点与其间的箭头所构成的结构,其具体定义如下:
\begin{definition}[(1-)范畴]\label{定义:1-范畴}
    一个(1-)范畴 $\cal{C}$ 系指以下信息:
    \begin{enumerate}
        \item 集合 $\Obj(\cal{C})$ , 其内元素称作 $\cal{C}$ 的\textbf{对象}.
        \item 对任意 $x, y \in \Obj (\mathcal{C})$, 有一个集合$\Hom_{\mathcal{C}} (x, y)$, 其元素称为从 $x$ 到 $y$ 的\textbf{态射}.
        \item 对任意 $x \in \Obj (\mathcal{C})$,
            有一个元素
            \[
                \identity_x \in \Hom_{\mathcal{C}} (x, x),
            \]
            称为 $x$ 到自身的\textbf{恒等态射}.
        \item 对任意 $x, y, z \in \Obj (\mathcal{C})$,
            有一个映射
            \begin{align*}
                \circ \colon
                \Hom_{\mathcal{C}} (x, y) \times \Hom_{\mathcal{C}} (y, z)
                & \to \Hom_{\mathcal{C}} (x, z), \\
                (f, g) & \mapsto g \circ f,
            \end{align*}
            称为\textbf{复合},
    \end{enumerate}
    并且满足以下两条公理
     \begin{itemize}
        \item
            (\textbf{单位律})
            对任意 $x, y \in \operatorname{Ob} (\mathcal{C})$,
            及任意 $f \in \mathcal{C} (x, y)$, 有
            \[
                \identity_y \circ f = f = f \circ \identity_x.
            \]
        \item
            (\textbf{结合律})
            对任意 $x, y, z, w \in \operatorname{Ob} (\mathcal{C})$,
            及任意 $f \in \mathcal{C} (x, y)$,
            $g \in \mathcal{C} (y, z)$, 
            $h \in \mathcal{C} (z, w)$, 有
            \[
                (h \circ g) \circ f = h \circ (g \circ f),
            \]
            故可记之为 $h \circ g \circ f$, 而不产生歧义.
    \end{itemize}
\end{definition}
\begin{remark}\label{注记:范畴}
    我们常常使用以下记号:
\begin{itemize}
    \item
        如果 $x \in \operatorname{Ob} (\mathcal{C})$,
        我们简记为 $x \in \mathcal{C}$.

    \item
        如果 $f \in \Hom_{\mathcal{C}} (x, y)$,
        我们也记 $f \colon x \to y$, 或者 $x \xrightarrow{f} y$.

    \item
        $\mathcal{C}$ 中所有态射构成的类常常记为
        $\operatorname{Mor} (\mathcal{C})$, 此时具有一对典范映射 
        \begin{tikzcd}
	{\Mor(\cal{C})} & {\Obj(\cal{C})}
	\arrow["t"', shift right, from=1-1, to=1-2]
	\arrow["s", shift left, from=1-1, to=1-2]
        \end{tikzcd}
        分别表示态射的\textbf{来源}和\textbf{目标}.
    \item 图表加箭头是讨论范畴的方便语言. 其中最常用的是\textbf{交换图表}的概念, ``交换'' 指态射合成后的结果相等,就是说图表中链接同一始末点组的道路给出相同的作用效果, 例如以下二则图表
    \[\begin{tikzcd}
	x & y \\
	& z
	\arrow["f", from=1-1, to=1-2]
	\arrow["{h}"', from=1-1, to=2-2]
	\arrow["g", from=1-2, to=2-2]
    \end{tikzcd}\quad
    \begin{tikzcd}
	x & y \\
	w & z
	\arrow["f", from=1-1, to=1-2]
	\arrow["u"', from=1-1, to=2-1]
	\arrow["g", from=1-2, to=2-2]
	\arrow["v"', from=2-1, to=2-2]
    \end{tikzcd}\]
    的交换性分别再说 $g\circ f = h$ 以及 $v\circ u = g\circ f$.\footnote{事实上在高阶范畴论中, 图表交换是信息而非性质.}
\end{itemize}
\end{remark}

事实上, 在这一步我们没有做什么不平凡的举动, 为方便读者理解, 我们给出以下例子
\begin{example}\label{例:范畴}
    \begin{enumerate}
        \item 当我们关心某一类数学对象的全体时, 可以取它们构成的范畴, 此时态射即为数学结构所容许的映射,或者说保持数学结构的映射, 例如
        \begin{itemize}
            \item 所有$\cal{U}$-小集合及其间映射构成范畴 $\cate{Set}$.
            \item 所有$\cal{U}$-小群及其间群同态构成的范畴 $\cate{Grp}$.
            \item 域 $\Bbbk$ 上全体向量空间及其间线性映射所构成的范畴 $\cate{Vect}({\Bbbk})$.
            \item 拓扑空间及其间连续映射构成范畴 $\cate{Top}$.
            \item 所有光滑流形及其间光滑映射构成范畴 $\cate{Mani}$.
            \item 可测空间及其间可测函数构成范畴 $\cate{Meas}$, 但是这一空间事实上缺少了很多信息(比如说零测的选取), 所以难堪大用.
            \item $R$-模上的链复形及其间链映射构成范畴 $\cate{\Chain_R}$.
            \item 全体概形及其间态射构成范畴 $\cate{Sch}$.
        \end{itemize}
        \item 我们也可以将集合 $S$ 升级为对应的范畴, 记作 $\cate{Disc}(S)$, 其对象集为 $S$ 而态射只有恒等态射.
        \item(子范畴) 有时候我们会在原范畴 $\cal{C}$ 中取出一部分对象($\Obj(\cal{C}')\subset \Obj(\cal{C})$)与态射(当然取出的态射$f$ 需要保证 $s(f), t(f) \in \Obj(\cal{C}')$) 所构成新范畴, 并且其它一切性质(即恒等态射, 结合律等)都继承自原范畴, 我们把这一新结构称为$\cal{C}$ 的子范畴. 当取出的态射正好为取出对象之间全体态射时, 我们把子范畴称为全(或者满)子范畴, 后面将看到这作为嵌入函子确实是全的.
        \item 取 $\Bbbk$ 上全体有限维向量空间所构成的范畴 $\cate{Vect}_{f}(\Bbbk)$, 容易发现其为 $\cate{Vect}(\Bbbk)$ 的全子范畴.
        \item 带点拓扑空间构成的范畴 $\cate{Top}_{\star}$, 其对象为所有的 $(E,e)$, 其中 $e \in E$ 称为基点. 从 $(X,x)$ 到 $(Y,y)$ 的态射为保持基点的连续映射, 即使得 $f(x) = y$ 的连续映射 $f:X \to Y$.
        \item 全体 Abel 群构成的范畴 $\cate{Ab}$, 它是 $\cate{Grp}$ 的全子范畴.
        \item(这两个例子可以不看XD) 以测度空间作为对象, 对于其间可测映射取以几乎处处相等(即不相等的地方在零测集内)作为等价关系的等价类(还需要保证可测映射关于零测集的原像为零测集), 可以得到范畴 $\cate{Measure}$, 但是这个范畴的信息太多, 每个对象都带有一个特定的测度, 这会导致我们做出一些不典范的选择.
        \item 一般而言, 我们考虑强化可测空间, 它是三元组 $(X,M,N)$, 其中 $M$ 为 $\sigma$-代数而 $N$ 为其表示零测部分所构成的 $\sigma$-理想, 对于可测函数 $f : (X,M,N) \to (Y,M',N')$ , 若对于任意 $n\in N'$, 都有 $f^{-1}(n) \in N$, 则称 $f$ 为保零测的.此外, 对于 $f,g : (X,M,N) \to (Y,M',N')$, 若对于任意 $m\in M'$ 有 $f^{-1}m'\oplus g^{-1}m'\in N$, 则称它们几乎处处弱相等.
        从而我们得到以强化可测空间作为对象, 保零测的可测函数集商去几乎处处弱相等的可测函数作为态射集所得到的范畴, 记为$\cate{EMS}$, 更加详细的内容可见\cite[\href{https://ncatlab.org/nlab/show/categories+of+measure+theory}{nlab}]{nlab:homepage}.
        \item 我们可以给出全体(小)范畴所构成的范畴 $\cate{Cat}$, 但后文我们将发现, 仅仅视其为 1-范畴是不自然的, 因为这样会损失自然变换(即2-态射)的信息, 它应该被视为一种 2-范畴(严格2-范畴), 参见\cite[2-范畴词条]{BananaSpace}.
    \end{enumerate}
\end{example}
在谈论函子之前, 请容许我们对于范畴进行多一点点的观察, 就是考虑范畴内态射的性质.显然的, 我们可以将单满性以及同构移入范畴之中.
\begin{definition}
    设 $x,y$ 为范畴 $\cal{C}$ 中的对象, $f:x \to y$ 为态射.则
    \begin{itemize}
        \item 称 $f$ 为\textbf{单态射}, 如果对任意 $Z\in \cal{C}$ 以及一对态射 $g,h : Z \to X$ 都有 $fg = fh \Leftrightarrow g=h$(左消去律);
        \item 称 $f$ 为\textbf{满态射}, 如果对任意 $Z \in \cal{C}$ 以及一对态射 $g,h : Y \to Z$ 都有 $gf = hf \Leftrightarrow g=h$(右消去律);
    \end{itemize}
    如果存在 $g$ 使得 $gf = \identity_X$ 则称 $f$ 左可逆而 $g$ 为其左逆; 类似地, $fg = \identity_Y$ 则称 $f$ 右可逆而 $g$ 为其右逆; 左可逆又右可逆的态射称为同构.
\end{definition}
\begin{definition}[子对象]\label{定义-子对象}
    在一般的范畴中, 称指向 $X$ 的单态射 $U\to X$ 的同构类为 $X$ 的子对象, 其中单态射的同构是指形如
    \[\begin{tikzcd}
	U \\
	&& X \\
	{\tilde{U}}
	\arrow[hook, from=1-1, to=2-3]
	\arrow["\simeq"', shift right, from=1-1, to=3-1]
	\arrow[shift right, from=3-1, to=1-1]
	\arrow[hook, from=3-1, to=2-3]
    \end{tikzcd}\]
    的交换图. $X$ 的子对象构成偏序集 $\Sub_{\cal{C}}(X)$.
\end{definition}
显然地,左可逆蕴含单而右可逆蕴含满, 一个态射是同构当且仅当它左右均可逆.但是一个态射$f: X \to Y$即单又满并不代表其为同构, 这是缘于它不一定是严格态射($\Image(f)\rightiso \op{coim}(f)$\footnote{事实上, 可以说明满态射相当于说 $\Image(f) \rightiso Y$, 而单态射相当于说 $X \rightiso \op{coim}(f)$.},但很可惜, 我们估计不会讲), 这也是在同调代数中, 我们一般考虑 Abel 范畴(Abel 范畴 $\cal{A}$ 为加性范畴, 所有态射皆有核与余核且严格.).
而后, 我们就可以给出一个新的例子
\begin{definition}[群胚]
    若一个范畴 $\cal{C}$ 的所有态射均可逆, 则称其为\textbf{群胚}, 群胚所构成的范畴记为 $\cate{Groupoid}$.
\end{definition}
\begin{example}
    群就是只有一个对象, 且态射为群元素的群胚, 将群 $G$ 视为群胚的过程叫做群的胚化, 记为 $\underline{G}$.
\end{example}
事实上, 群胚是一个 (1,0)-范畴\footnote{所谓(m,n)-范畴是指 $k>n$ 的态射皆可逆的 $m$-范畴}, 并且是集合的推广. 如果只考虑 1-范畴, 则可以将群胚视为群的推广.\\
事实上, 群胚是更贴合于拓扑空间结构的 1-范畴, 我们可以很自然地从拓扑空间中取出群胚(当然,只是从同伦的角度来看, 这是从拓扑空间造出 1-范畴的典范手段), 称为基本群胚.
\begin{example}\label{基本群胚}
    对于拓扑空间 $E$ ,其\textbf{基本群胚} $\Pi_{1}(E)$ 定义为如下范畴:
    \begin{itemize}
        \item $\Obj(\Pi_1(E)) = E$.
        \item $\Hom_{\Pi_1(E)}(x_0,x_1) = $从 $x_0$ 到 $x_1$ 的道路类.
        \item $\identity_{x_0} = [c_{x_0}]$ 其中右侧表示在 $x_0$ 处的常值道路.
    \end{itemize}
\end{example}
关于基本群胚的细节探讨我们放在后文进行, 在这里我们只留下一个悬念, 即考虑基本群胚的时候我们实际上把道路之间的同伦商去了, 这会使我们损失一些信息(正如我们在考虑复形 $\chain(\cal{A})$ 的同伦范畴 $\cate{K}(\cal{A})$ 时, 我们商去了零伦, 这会导致后来局部化时出现问题, 即在定义导出范畴时好三角无法精确到唯一同构, 三角范畴缺少核与余核, 导出函子无法简单刻画等问题), 所以我们不应该商去这些同伦(那么同伦间的同伦是否应该商去呢?), 而应该保持这些``高阶''的态射(那又该怎样合理的构造呢?), 在此我们先装聋作哑把 1-范畴学懂, 至于考虑高阶态射后的 $\infty$-范畴留待读者自行探索.\\
此外, 范畴具有着对偶构造(不过是把态射倒置)\footnote{在高阶范畴上, 会出现不止一种对偶结构,即不仅仅可倒置1-态射,还可以倒置高阶态射.}, 即反范畴, 其具体定义如下:
\begin{definition}
    对于任意范畴 $\cal{C}$, 定义其反范畴 $\cal{C}^{\opposite}$ 如下:
    \begin{itemize}
        \item $\Obj(\cal{C}^{\opposite}) = \Obj(\cal{C})$, 对于 $X\in \cal{C}$, 记其在反范畴中的对应为 $X^{\opposite}$.
        \item 对于任意对象 $X,Y$, $\Hom_{\cal{C}^{\opposite}}(X^{\opposite},Y^{\opposite}) \coloneqq \Hom_{\cal{C}}(Y,X)$.
        \item 反范畴中的态射合成 $\circ$ 定义为 $\cal{C}$ 中的反向合成.
        \item 恒等映射同 $\cal{C}$.
    \end{itemize}
\end{definition}
后文我们将看到对偶构造 $(-)^{\opposite}$ 构成函子.
\subsection{函子}
现在我们来讲一下函子, 粗略地说, 函子也是一种态射, 它不过是保持范畴结构的态射而已, 由于范畴具有对象集与态射集两种结构, 因此函子也理当从这两种结构上考虑, 此外函子并不需要带有更多的信息, 只需要保证范畴公理(即定义~\ref{定义:1-范畴})的照常运作即可.
\begin{definition}[函子]
    设 $\cal{D}$, $\cal{C}$ 为范畴, 一个函子 $F: \cal{C} \to \cal{D}$ 系指以下信息:
    \begin{enumerate}
        \item 对象集之间的映射 $F: \Obj(\cal{C}) \to \Obj(\cal{D})$.
        \item 态射之间的映射 $\Hom_{\cal{C}}(x,y)\to \Hom_{\cal{D}}(F(x),F(y))$.
    \end{enumerate}
    需要满足以下公理:
    \begin{itemize}
        \item 对每个 $x\in \Obj(\cal{C})$ 都有
        \[
        F(\identity_x) = \identity_{F(x)}.
        \]
        \item 它将 $\cal{C}$ 中如下交换图映为 $\cal{D}$ 中的交换图
        \[\begin{tikzcd}
	x & y \\
	& z
	\arrow["f", from=1-1, to=1-2]
	\arrow["{g\circ f}"', from=1-1, to=2-2]
	\arrow["g", from=1-2, to=2-2]
       \end{tikzcd} \Rightarrow 
       \begin{tikzcd}
	{F(x)} & {F(y)} \\
	& {F(z)}
	\arrow["{F(f)}", from=1-1, to=1-2]
	\arrow["{F(g)\circ F(f)}"', from=1-1, to=2-2]
	\arrow["{F(g)}", from=1-2, to=2-2]
        \end{tikzcd}\]
    \end{itemize}
\end{definition}
而后我们给出一些例子以资体会
\begin{example}\label{例:函子}
    \begin{enumerate}
    \item 每个范畴 $\cal{C}$ 都有到自身的恒等函子, 记为 $\identity_{\cal{C}}$.
    \item 前文所提到的子范畴 $\cal{C}'$ 到原范畴 $\cal{C}$ 的含入可以构成函子, 称其为包含函子, 记作 $\iota : \cal{C}' \hookrightarrow \cal{C}$.
    \item 对于范畴的范畴 $\cate{Cat}$ 可以定义对偶构造 $(-)^{\opposite}: \cate{Cat} \to \cate{Cat}$, 它将范畴 $\cal{C}$ 映为其反范畴 $\cal{C}^{\opposite}$, 范畴间的函子映为反范畴间的对应函子. 不难发现在 1-范畴语境下 $((-)^{\opposite})^{\opposite} = \identity_{\cate{Cat}}$.
    \item 考虑域 $\Bbbk$ 上的向量空间范畴 $\cate{Vect}(\Bbbk)$, 回忆其对偶空间定义为
    \[
    V^{\lor} \coloneqq \Hom_{\Bbbk}(V,\Bbbk) = \{\Bbbk\,\text{-线性映射}\, V \to \Bbbk\}
    \]
    对于任一线性映射 $f: V_1 \to V_2$, 它通过以下图表的方式诱导对偶空间的反向线性映射(即转置映射, 其作用效果为复合上 $f$, 容易发现在有限维取基用矩阵表出后即为矩阵转置)
    \[\begin{tikzcd}
	& {V_2^{\lor}=\Hom_{\cate{Vect}_{\Bbbk}}(V_2,\Bbbk)} \\
	{V_1} & \Bbbk \\
	{V_2} & {V_1^{\lor}=\Hom_{\cate{Vect}_{\Bbbk}}(V_1,\Bbbk)}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{f^{\lor}(a) = a\circ f}", from=2-1, to=2-2]
	\arrow["f"', from=2-1, to=3-1]
	\arrow[""{name=1, anchor=center, inner sep=0}, "a"', from=3-1, to=2-2]
	\arrow["{f^{\lor}}"', shift right=5, from=3-2, to=1-2]
	\arrow["\in"{marking, allow upside down}, draw=none, from=0, to=1-2]
	\arrow[shorten <=2pt, shorten >=2pt, maps to, from=1, to=0]
	\arrow["\in"{marking, allow upside down}, draw=none, from=1, to=3-2]
    \end{tikzcd}\]
    具体写出即为
    \begin{align*}
        f^{\lor} : V_2^{\lor} = \Hom_{\cate{Vect}(\Bbbk)}(V_2,\Bbbk) &\to V_1^{\lor} = \Hom_{\cate{Vect}(\Bbbk)}(V_1,\Bbbk),\\
        [a: V_2 \to \Bbbk] &\mapsto  a \circ f
    \end{align*}
    易见 $D: V \mapsto V^{\lor}$, $f\mapsto f^{\lor}$ 定义了函子 $D: \cate{Vect}(\Bbbk)^{\opposite} \to \cate{Vect}(\Bbbk)$, 我们可以再取一次对偶并且复合后得到函子 $DD^{\opposite} : \cate{Vect}(\Bbbk) \to \cate{Vect}(\Bbbk)$. 分别称 $D$ 和 $DD^{\opposite}$ 为对偶和双对偶函子.
    \item 对于带点拓扑空间 $(E,e)\in \cate{Top}_{\star}$, 指定其基本群 $\pi_1(E,e)$ 就给出函子 $\cate{Top}_{\star} \to \cate{Grp}$, 若指定大于等于 2 的高阶同伦群则给出函子 $\cate{Top}_{\star} \to \cate{Ab}$, 此外, 空间的(某种)同调群 $X \mapsto H_n(X;\Z)$ 给出一族函子 $H_n: \cate{Top} \to \cate{Ab}$. 而上同调群给出函子 $H^n : \cate{Top}^{\opposite} \to \cate{Ab}$.
    \item 从拓扑空间到其基本群胚给出函子 $\Pi:\cate{Top} \to \cate{Groupoid}$, 群的胚化给出函子 $\underline{(-)}: \cate{Grp} \to \cate{Groupoid}$.
    \end{enumerate}
\end{example}
由于函子作用于两个层面, 并且回忆到我们先前所提到过的范畴论的哲学原理, 我们可以给出函子作为映射的部分性质, 由于范畴论以同构代替严格等式, 因此在对象上我们不苛求严格相等, 而在态射上, 集合的同构就只有双射, 因此我们分为单满性进行考虑.
\begin{definition}
    对于函子 $F: \cal{C} \to \cal{C}'$,
    \begin{enumerate}
        \item 称 $F$ 为本质满的, 若 $\cal{C}$ 中的任一对象都同构于某个 $F(x)$;
        \item 称 $F$ 是忠实的, 若对所有的 $x,y \in \cal{C}'$ 映射 $\Hom_{\cal{C}'}(x,y) \to \Hom_{\cal{C}}(Fx,Fy)$均为单射.
        \item 若上述映射对于所有 $x,y \in \cal{C}'$ 均为满射, 则称 $F$ 是全的.
    \end{enumerate}
\end{definition}
\begin{exercise}
    观察上述例子, 说明哪些函子是本质满的, 哪些函子是全的, 哪些函子是忠实的.
\end{exercise}
到函子这一层就已经可以进行一些粗浅的应用, 典型案例就是 Brouwer 不动点定理的证明.
\begin{theorem}[Brouwer 不动点定理]\label{定理:Brouwer}
    设 $D^n$ 是 Euclid 空间中的单位球体,
    则对任意连续映射 $f \colon D^n \to D^n$,
    存在 $x \in D^n$, 使得 $f(x) = x$.
\end{theorem}
\begin{proof}
    如不然, 记 $S^{n-1}$ 为单位球面, 则映射
    \[
        \pi \colon D^n \to S^{n-1}, \quad
        x \mapsto \text{射线}\ f(x) \to x\ \text{与}\ S^{n-1}\ \text{的交点}
    \]
    与含入映射 $i \colon S^{n-1} \to D^n$ 之复合为恒等映射.
    于是它对应的 $n-1$ 阶约化同调群映射 
    \[
        \widetilde H_{n-1}(S^{n-1}) \to
        \widetilde H_{n-1}(D^n) \to
        \widetilde H_{n-1}(S^{n-1})
    \]
    之复合是恒等映射. 但 $\widetilde H_{n-1}(D^n) = 0$, 
    $\widetilde H_{n-1}(S^{n-1}) = \Z$, 矛盾.
\end{proof}
当然你也可以使用基本群进行证明维数为 2的情况, 因为你可以根据直观显然得到 $\pi_1(D^2) = 0$ 而 $\pi_1(S^1) = \Z$.
\subsection{自然变换}
现在我们已经给出了函子的定义, 那么我们其实可以观察到在引言中我们所说的线性空间与双对偶空间的交换图表能够改写如下
\[\begin{tikzcd}
	V & W \\
	{DD^{\opposite}V} & {DD^{\opposite}W}
	\arrow["f", from=1-1, to=1-2]
	\arrow["\ev"', from=1-1, to=2-1]
	\arrow["\ev", from=1-2, to=2-2]
	\arrow["{DD^{\opposite}(f)}", from=2-1, to=2-2]
\end{tikzcd}\]
可以看出这自然地勾连了函子 $\identity_{\cate{Vect}_f(\Bbbk)}$ 以及双对偶函子 $DD^{\opposite}$. 本节中我们来仔细探讨这一性质, 不难发现, 这一性质恰好可以视为函子间的态射(保持了函子的结构), 因此自然性也称为函子性.
\begin{definition}[自然变换,或函子间的态射]
    设 $\cal{C}$, $\cal{D}$ 为范畴, $F,G:\cal{C} \to D$ 为函子, 从 $F$ 到 $G$ 的\textbf{自然变换} $\alpha$ 通常记为
    \[
    \alpha : F \Rightarrow G,
    \]
    由以下信息构成:
    \begin{itemize}
        \item 对每个 $x\in \cal{C}$, 都有 $\cal{D}$ 中态射 $\alpha_x : F(x) \to G(x)$.
    \end{itemize}
    满足以下相容性(自然性)条件:对于 $\cal{C}$ 中任一态射 $f:x \to y$, 有 交换图
    \[\begin{tikzcd}
	{F(x)} & {F(y)} \\
	{G(x)} & {G(y)}
	\arrow["{F(f)}", from=1-1, to=1-2]
	\arrow["{\alpha_x}"', from=1-1, to=2-1]
	\arrow["{\alpha_y}", from=1-2, to=2-2]
	\arrow["{G(f)}"', from=2-1, to=2-2]
    \end{tikzcd}\]
\end{definition}
可以以2-胞腔的形式写为
\[\begin{tikzcd}
	{\cal{C}} && {\cal{D}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-18pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G"', curve={height=18pt}, from=1-1, to=1-3]
	\arrow["\alpha", shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
我们可以将自然变换视为 $F$ 到 $G$ 的同伦(但是不一定可逆).
因此其自然满足同伦的几种性质(横纵合成, 在此不做赘述).\\
有了自然变换, 接下来所探讨的问题就是何时可以取逆, 由其定义可知如果我们能在 $\cal{D}$ 中对于 $F(x) \to G(x)$ 逐点取逆, 那确实就可以逆过来. 事实上, 这也是一种表达``两个函子相等''这一想法的正确概念, 在范畴论中,我们称其为自然同构.
\begin{definition}[自然同构]
    设 $\cal{C}$, $\cal{D}$ 为范畴, $F,G :\cal{C} \to \cal{D}$ 为函子, 则 $F$ 到 $G$ 的\textbf{自然同构}是指一个自然变换 $\alpha : F \Rightarrow G$, 使得
    \begin{itemize}
        \item 对于任意 $x\in \cal{C}$, 都有 $\alpha_x: F(x) \to G(x)$ 为 $\cal{D}$ 中的同构.
    \end{itemize}
    换言之 $\alpha$ 可以逐点的取逆.此时也称 $F$ 与 $G$ 自然同构.
\end{definition}
不难发现每个函子都自然同构于其自身.
\begin{example}\label{例:双对偶自然同构于恒等}
    取范畴 $\cate{Vect}_f(\Bbbk)$, 使用基本的线性代数知识我们可以知道 $\ev_V : V \to (V^{\lor})^{\lor}$ 为同构, 因此 $DD^{\opposite}$ 与 $\identity_{\cate{Vect}_f(\Bbbk)}$ 为自然同构.
\end{example}
现在,可以更进一步, 讨论 ``两个范畴看起来相等'' 的正确解释,由于我们将自然变换视为同伦, 此时最合适的等价并非严格相等而是同构(这也是范畴论哲学原理的体现), 或者说是一种同伦等价.
\begin{definition}[范畴等价]
    设 $\cal{C}$, $\cal{D}$ 为范畴, $F: \cal{C} \to \cal{D}$ 为函子. 称 $F$ 为\textbf{范畴等价}, 如果:
    \begin{itemize}
        \item 存在函子 $G : \cal{D} \to \cal{C}$, 以及函子之间的自然同构
    \[
    G \circ F \simeq \identity_{\cal{C}}, \quad F \circ G \simeq \identity_{\cal{D}}.
    \]
    此时, 也称范畴 $\cal{C}$, $\cal{D}$ \textbf{等价}, 称 $F$, $G$ 互为 \textbf{逆函子}.
    \end{itemize}
\end{definition}
\begin{remark}
    范畴等价在不同范畴的$\Hom$-集间搭建了双射,这表明等价的范畴具有完全一样的性质, 这对于我们的研究颇有帮助, 这使得我们可以将一个较难研究的数学对象转换成可以简单研究的数学对象, 典型案例就是练习~\ref{练习:矩阵表示}告诉我们只需要研究(有限维)线性映射所对应的矩阵就可以研究出线性映射的全体信息.
\end{remark}
\begin{example}\label{例:范畴等价}
    \begin{enumerate}
        \item 例~\ref{例:双对偶自然同构于恒等}在反范畴中的构造给出 $\identity_{\cate{Vect}_f(\Bbbk)^{\opposite}}\rightiso D^{\opposite}D$ 这说明对偶函子 $D$ 是范畴等价.
        \item(代数-几何对偶) 选定交换环构成的范畴 $\cate{CRing}$ 以及仿射概形构成的范畴 $\cate{AffSch}$,则
        \begin{center}
            素谱函子$\Spec : \cate{CRing}^{\opposite} \to \cate{AffSch}$ 与 整体截面环函子$\OO: \cate{AffSch} \to \cate{CRing}$
        \end{center}
        互为逆函子,具体证明见代数几何讲义第三讲.这也说明仿射概形的全体信息均来自于其对应的交换环, 层不过起到一个很好的分类器作用. 事实上, 我们可以更细化的得到一对伴随, 不过这是后文伴随的例子了.
    \end{enumerate}
\end{example}
本节的目标是讨论函子作为范畴等价的条件.其实我们可以不加解释的给出以下定理等主讲人来讲, 证明其实是简单的.
\begin{theorem}
    对于函子 $F : \cal{C} \to \cal{D}$,以下叙述等价:
    \begin{enumerate}
        \item $F$ 为范畴等价,
        \item $F$ 为全忠实本质满函子.
    \end{enumerate}
\end{theorem}
\begin{proof}[概要]
    \begin{enumerate}
        \item[($\Rightarrow$)] 若 $F$ 为范畴等价, 则存在 $G$ 使得 $GF \rightiso \identity_{\cal{C}}$ 且 $FG \rightiso \identity_{\cal{D}}$, 从而对于任意 $z \in \cal{D}$, 有 $F(G(z)) \simeq z$, 从而 $F$ 本质满, 至于全忠实性注意到 $\Hom_{\cal{C}}(GFx,GFy) \simeq \Hom_{\cal{C}}(x,y)$, 以及 $\Hom_{\cal{D}}(FGx',FGy') \simeq \Hom_{\cal{D}}(x',y')$ 即可发现 $\Hom_{\cal{C}}(x,y) \to \Hom_{\cal{C}}(Fx,Fy)$ 可逆.
        \item[($\Leftarrow$)] 若 $F$ 全忠实本质满, 则 $\Hom_{\cal{C}}(x,y)\to \Hom_{\cal{D}}(Fx,Fy)$ 为双射, 因此只需要在对象集上进行讨论即可, 由本质满定义可知 $\cal{D}$ 中的对象同构于某个 $Fx$, 因此不妨考虑 $\cal{D}$ 中对象的同构类所构成的子范畴 $\sk(\cal{D})$, 称为 $\cal{D}$ 的骨架, 由于同构的对象在 $F$ 下的像也是同构的, 因此考虑 $\sk(\cal{C})$, 现在我们将 $F$ 约化为两个骨架范畴下的函子 $F': \sk(\cal{C})\to \sk(\cal{D})$, 由于 $F$ 全忠实, 所以 $F'$ 自然全忠实, 由于 $F$ 本质满, 因此 $F'$ 在对象集上为一一对应, 因此 $F'$ 可以取严格逆, 即存在 $G' : \sk(\cal{D})\to \sk(\cal{C})$ 使得 $G'F' = \identity_{\sk(\cal{C})}$ 且 $F'G' = \identity_{\sk(\cal{D})}$, 而后说明从骨架范畴到原范畴为范畴等价即可, 这不过是一种广义的形变收缩, 根据我们对于范畴等价的剖析可以直接看出其为范畴等价. 从而可以造出 $F$ 的逆函子 $G$.
    \end{enumerate}
\end{proof}
\begin{exercise}\label{练习:矩阵表示}
    选定矩阵所构成的范畴 $\cate{Mat}$ 其对象为 $\Z_{\geq 0}$, $\Hom_{\cate{Mat}}(n,m) \coloneqq M_{n\times m}(\Bbbk)$ 即为取值于 $\Bbbk$ 的 $n \times m$ 矩阵全体, 态射合成定义为矩阵乘法, 试证明 
    \begin{align*}
        F: \cate{Mat} &\to \cate{Vect}_f(\Bbbk)\\
        n &\mapsto \Bbbk^{\bigoplus n}\\
        \Hom(n,m)\ni A &\mapsto FA: \Bbbk^{\bigoplus n}\xrightarrow{v \mapsto Av} \Bbbk^{\bigoplus m}
    \end{align*}
    为范畴等价, 这无非是有限维情况下线性映射的矩阵表达, 说明在有限维情况下矩阵包含了线性映射的全体信息.
\end{exercise}
\subsection{函子范畴}\label{函子范畴}
考虑 2-胞腔
\[\begin{tikzcd}
	{\cal{C}} && {\cal{D}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-24pt}, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "G"', curve={height=24pt}, from=1-1, to=1-3]
	\arrow["\theta", shorten <=6pt, shorten >=6pt, Rightarrow, from=0, to=1]
\end{tikzcd} \xRightarrow{\text{旋转 90 度}} 
\begin{tikzcd}
	F \\
	G
	\arrow["\theta", from=1-1, to=2-1]
\end{tikzcd}\]
我们可以将纸面旋转九十度(竖起来), 发现我们可以将函子视为点(对象), 自然变换视为态射. 因此得到
\begin{definition}[函子范畴]
    设 $\mathcal{C}_{1},\mathcal{C}_{2}$ 为 $\mathcal{U}$-范畴,定义函子范畴 $ \Fct(\mathcal{C}_{1},\mathcal{C}_2)$ ,其对象为所有从 $\mathcal{C_{1}}$ 到 $\mathcal{C}_{2}$ 的函子,任意两对象$F,G$间的态射为其间的自然变换,态射的合成取纵合成.当 $\mathcal{C}_{1}$ 是小范畴时常简写作 $\mathcal{C}_{1}^{\mathcal{C}_{2}}$ .
    
\end{definition}
\begin{exercise}
    当 $\mathcal{I}$ 取离散范畴时, $\Fct(\mathcal{I},C)\simeq \prod_{i\in I}\cal{C}$
\end{exercise}
\subsection{泛性质}
本节来讲述范畴论的核心概念之一, 即泛性质. 通过泛性质构造出的数学对象叫做万有构造. 对于我们想要构造的数学对象 $X$ , 我们所要求 $X$ 具有的泛性质可以是以下两者之一(其实就是 $Y$ 到 $X$ 和 $X$ 到 $Y$ 的区别):
\begin{itemize}
    \item 对任何对象 $Y$, 为了给出 $Y$ 到 $X$ 的态射, 只需给出某种与 $Y$ 有关的信息而不提及 $X$.
    \item 对任何对象 $Y$, 为了给出 $X$ 到 $Y$ 的态射, 只需给出某种与 $Y$ 有关的信息而不提及 $X$.
\end{itemize}
此处, ``泛'' 指的是你需要对于(所考虑的)全体数学对象 $Y$ 都满足, 或者另一方面, ``泛''的意思其实是最, 也就是你能够造出的满足条件的最``大''/``小''的对象, 当然这种构造方式并不总是良定义的. 可能会有两个问题:
\begin{itemize}
    \item 存在性: 给定一种泛性质, 可能并没有对象 $X$ 满足该泛性质.
    \item 唯一性: 可能有多个 $X$ 满足同一个泛性质.
\end{itemize}
由于范畴论的基本原理, 对于唯一性我们事实上只需要让这多个 $X$ 在同构意义下是唯一的即可. 因此我们需要一种能够去描述在同构意义下唯一的工具, 并且它在我们给出某种与 $Y$ 有关而不提及 $X$ 的信息时可以给出从 $Y$ 到 $X$(或从 $X$ 到 $Y$) 的态射.
这套工具我们称为始终对象, 而我们可以将 $Y$ 有关的信息写为函子, 而在对应逗号范畴中以始终对象的手段给出我们所需的万有构造. 当然, 始终对象本身也是一种万有构造.
\begin{definition}[始对象,终对象,零对象]
    范畴 $\cal{C}$ 中的对象 $x$ 为\textbf{始对象}, 如果对所有对象 $y$ 集合 $\Hom_{\cal{C}}(x,y)$ 恰有一个元素. 类似地, 称 $x$ 为\textbf{终对象}, 如果对所有对象 $y$, 集合 $\Hom_{\cal{C}}(y,x)$ 恰有一个元素. 若 $x$ 既是始对象又是终对象, 则称 $x$ 为\textbf{零对象}. 对于带有零对象的范畴, 称为\textbf{带点范畴}.
\end{definition}
\begin{remark}
    当我们把 $\Hom$ 由集合变为``空间''时(准确来说是我们考虑 $\infty$-范畴时, 此时 $\Hom$ 为 $\infty$-群胚, 或称生象), 始对象和终对象的刻画应当为 $\Hom(x,y)$ 同伦等价于单点空间(或称可缩).
\end{remark}
我们可以注意到我们其实没有给出任何关于始/终对象的具体解释, 而只是描述出接下来我们解释为何前文说使用始终对象来描述在同构意义下唯一.
\begin{proposition}\label{命题:始对象存在则唯一}
    设 $x,x'$ 为 $\cal{C}$ 中的始对象,则存在唯一的同构 $x\rightiso x'$, 同样性质对于终对象也成立.
\end{proposition}
\begin{proof}
    只需证明始对象的情况即可, 由于 $\Hom_{\cal{C}}(x,x')$ 和 $\Hom_{\cal{C}}(x',x)$ 都只有一个元素, 分别记为 $f,g$ , 不难发现 $g\circ f \in \Hom_{\cal{C}}(x,x)$ 由始对象定义即知其为 $\identity_x$, 同理知 $f\circ g = \identity_{x'}$.
\end{proof}
\begin{definition}[零态射]
    设 $\cal{C}$ 中有零对象, 记为 $0$. 对任意 $x,y \in \Obj(\cal{C})$, 定义\textbf{零态射} $0: x \to y$ 为
    \[
    x \to 0\to y
    \]
    的合成.
\end{definition}
始对象和终对象在日常生活中应当是司空见惯的, 以下给出几个例子.
\begin{example}
    \begin{enumerate}
        \item 在集合范畴 $\cate{Set}$ 中, $\varnothing$ 是始对象而单点集 $\{*\}$ 是终对象.
        \item 拓扑空间范畴 $\cate{Top}$ 中, 空空间 $\varnothing$ 为始对象而单点空间 $\{*\}$ 为终对象.
        \item 在环范畴中,整数环 $\Z$ 是始对象, 因此在交换环范畴中也是如此, 进而在概形范畴 $\cate{Sch}$ 中, $\Spec \Z$ 是终对象. 而环范畴的终对象是零环.
        \item 在域 $\Bbbk$ 的向量空间范畴 $\cate{Vect}(\Bbbk)$ 中, 零对象即为零向量空间.
        \item 在群范畴 $\cate{Grp}$ 中, 零对象为平凡群.
    \end{enumerate}
\end{example}
一般而言,在不造成歧义的情况下, 将始对象记为 $\varnothing$ 而终对象记为 $*$.
逗号范畴语言可以辅助我们去讨论泛性质(但它并非万能):
\begin{definition}[逗号范畴]
    对于函子 $\mathcal{C}\xrightarrow{f}\mathcal{D}\xleftarrow{g}\cal{E}$.
    则其\textbf{逗号范畴}是如下定义的范畴:
    \begin{itemize}
        \item 对象: 形如 $(x, y, a)$ 的三元组,
        其中 $x \in \mathcal{C}$, $y \in \mathcal{D}$,
        $a \in Hom_{\mathcal{E}} (f (x), g (y))$.
        \item 从 $(x, y, a)$ 到 $(x', y', a')$ 的态射是二元组 $(c, d)$,
        其中 $c \in \mathcal{C} (x, x')$, $d \in \mathcal{D} (y, y')$,
        使得 $\mathcal{E}$ 中的图表
        \[\begin{tikzcd}
	{f(x)} & {g(y)} \\
	{f(x')} & {g(y')}
	\arrow["a", from=1-1, to=1-2]
	\arrow["{f(c)}"{description}, from=1-1, to=2-1]
	\arrow["{g(d)}"{description}, from=1-2, to=2-2]
	\arrow["{a'}"', from=2-1, to=2-2]
       \end{tikzcd}\]
        交换.
    \end{itemize}

    我们将这个范畴记为
    \begin{center}
        $\mathcal{C} \underset{f, \, \mathcal{D}, \, g}{\vec{\times}}
        \mathcal{E} \quad \text{或} \quad
        \mathcal{C} \mathbin{\underset{\mathcal{D}}{\vec{\times}}}
        \mathcal{E}$ \\ $\text{或} \quad
        (f \downarrow g) \quad \text{或} \quad (f \mathbin{/} g) .$
    \end{center}
\end{definition}
一般而言, 泛性质可以描述为某种切片范畴的始/终对象.
\begin{example}
    \begin{itemize}
        \item 模的张量积 : 取 $R \in \cate{CRing}$ 为交换环, 考虑 $R$-模构成的范畴 $R\dcate{Mod}$, 对于 $M,N \in R\dcate{Mod}$ 我们现在想将 $M$ 和 $N$ 的元素形式地 ``配对'', 这可以理解为映向某个 $R$-模(由于此时为交换环) $A$ 的平衡积 $B \colon M \times N \to A$. 所谓平衡积是满足以下条件的映射: 对于 $x,x'\in M$, $y,y'\in N$ 以及 $r \in R$
        \begin{itemize}
            \item (作为群同态) $B(x+x',y) = B(x,y) + B(x',y)$, $B(x,y+y') = B(x,y) + B(x,y')$.
            \item (与 $R$-模结构相容) $B(xr,y) = B(x,ry)$.
        \end{itemize}
        从 $M\times N$ 全体平衡积构成的范畴即为 $\cate{Bil}(M,N,*)$, 不难发现, 平衡积总是会减少 $M$ 和 $N$ 中的信息, 我们想尽可能保留这些信息, 相当于说选取一个最``大''的平衡积, 使得它不会商掉多余的信息.
        这相当于说考虑 $\cate{Bil}(M,N,*)$ 的始对象. 
        \[\begin{tikzcd}
	{M\times N} & {M\otimes N} \\
	& A
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-2]
	\arrow["{\exists !}", dashed, from=1-2, to=2-2]
        \end{tikzcd}\]
        把 $M\otimes N$ 称为 $M$ 和 $N$ 的张量积.
    \end{itemize}
\end{example}
\subsection{极限与完备性}
本节来讲述在范畴论中最为常见也是最为基本的万有构造---(余)极限.\\
我们将使用很多种方式(可能会配上相应图表)来理解(余)极限这一概念, 粗略来说, (余)极限就是满足一些态射条件的最小(大)的对象\footnote{如果我们将 $A \to B$ 称为 $A$ 比 $B$ 大.}. 我们先讲解\cite[$\S$ 2.7 极限]{李文威卷一}一节中关于极限的定义.
\begin{definition}
    令 $I$, $\cal{C}$ 为范畴. 定义对角函子 $\Delta \colon \mathcal{C} \to \mathcal{C}^I \coloneqq \Fct(I,\cal{C})$ 如下: 它将任一 $X \in \Obj(\cal{C})$ 映为常值函子
    \[
    \Delta(X) \colon I \to \mathcal{C} 
    \left\{
    \begin{array}{ccc}
        \forall i\in \Obj(I), &  i \mapsto X\\
         \forall (i\to j) \in \Mor(I),& (i\to j) \mapsto [\identity_X\colon X \to X]. 
    \end{array}
    \right.
    \]
    给定态射 $f \colon X \to Y$, 范畴 $\mathcal{C}^I$ 中 $\Delta(f) \colon \Delta(X) \to \Delta(Y)$ 的定义是显然的: 它对每个 $i\in \Obj(I)$ 指定 $f \colon X \to Y$.
\end{definition}
现在给出函子 $\alpha \colon I\to \cal{C}$, 我们想得到一种对象 : 
\begin{itemize}
    \item 它是范畴 $\cal{C}$ 中的对象,
    \item 它最大程度上保留了函子 $\alpha$ 的信息, 在某种意义下, 它``表示''了函子 $\alpha$, 但并非可表.
\end{itemize}
我们该如何得到这样的对象? 答案是具有两个方向, 一个方向是从比 $\alpha$ ``大''的地方往小``逼近'' $\alpha$, 而另一个方向是从比 $\alpha$ 小的地方往大``逼近''$\alpha$, 为此, 我们需要使用对角函子将 $X \in \cal{C}$ ``变为'' $\mathcal{C}^I$ 的对象 $\Delta(X)$. \\
具体而言\footnote{为简便起见, 此处使用1-态射而非2-态射来描述函子间的自然变换}, 让我们考虑由函子 $I \xrightarrow{j_{\alpha}} \mathcal{C}^I \xleftarrow{\Delta} \cal{C}$ 所诱导的逗号范畴 $I \vec{\dtimes{\mathcal{C}^I}}\cal{C}$, 我们来显式的给出其结构, 其对象形如 $\alpha \to \Delta(X)$, 而态射为使得图表交换的 $f \colon X \to Y$ 诱导的对角函子之间的态射
\[\begin{tikzcd}
	\alpha & {\Delta(X)} \\
	& {\Delta(Y)}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-2]
	\arrow["{\Delta(f)}", from=1-2, to=2-2]
\end{tikzcd}\]
而对于 $\alpha \to \Delta(X)$, 我们可以写为
\[\begin{tikzcd}
	\cdots & {\alpha(i)} & {\alpha(j)} & \cdots \\
	\cdots & X & X & \cdots \\
	&& X
	\arrow[from=1-2, to=1-1]
	\arrow["{\alpha(i\to j)}", from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-3, to=2-3]
	\arrow[from=1-4, to=2-4]
	\arrow[equal, from=2-1, to=3-3]
	\arrow[from=2-2, to=2-1]
	\arrow[equal, from=2-2, to=2-3]
	\arrow[equal, from=2-2, to=3-3]
	\arrow[equal, from=2-3, to=2-4]
	\arrow[equal, from=2-3, to=3-3]
	\arrow[equal, from=2-4, to=3-3]
\end{tikzcd}\]
此处上下的横向的箭头分别为 $\Mor(I)$ 在 $\alpha$ 和 $\Delta(X)$ 下的像. 此时态射 $\Delta(f)$ 就可以显式的写为使得图表交换的 $\cal{C}$ 中态射 $f$(为简便起见只留 $\alpha(i)$ 和 $\alpha(j)$).
\[\begin{tikzcd}
	{\alpha(i)} && {\alpha(j)} \\
	& X \\
	& Y
	\arrow["{\alpha(i\to j)}", from=1-1, to=1-3]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-1, to=3-2]
	\arrow[from=1-3, to=2-2]
	\arrow[from=1-3, to=3-2]
	\arrow["f"{description}, from=2-2, to=3-2]
\end{tikzcd}\]
此时, 可以认为在图表中的 $X$, $Y$ 均为比 $\alpha$ ``小'' 的对象, 这些对象一般称为\textbf{余锥}, 为了逼近 $\alpha$, 我们自然需要在这些对象中选出最 ``大'' 的那个, 记为 $\indlim \alpha$, 这相当于说对于任意对象 $\alpha \to \Delta(X)$, 都有 $\Delta(\indlim \alpha)$ 使得图表交换
\[\begin{tikzcd}
	\alpha & {\Delta(\indlim \alpha)} \\
	& {\Delta(X)}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-2, to=2-2]
\end{tikzcd} \Rightarrow\begin{tikzcd}
	{\alpha(i)} && {\alpha(j)} \\
	& {\indlim \alpha} \\
	& X
	\arrow["{{\alpha(i\to j)}}", from=1-1, to=1-3]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-1, to=3-2]
	\arrow[from=1-3, to=2-2]
	\arrow[from=1-3, to=3-2]
	\arrow[from=2-2, to=3-2]
\end{tikzcd}\]
这相当于说取 $I \xrightarrow{j_{\alpha}} \mathcal{C}^I \xleftarrow{\Delta} \cal{C}$ 的始对象. 将该对象称为余极限.\\
考虑 $\mathcal{C} \xrightarrow{\Delta} \mathcal{C}^I \xleftarrow{j_{\alpha}} I$ , 其中 $\Delta(X)$ 对应的 $X$ 都相当于说是比 $\alpha$ ``大'' 的对象, 一般称为\textbf{锥}, 为逼近 $\alpha$ 自然需要选取其中最小的对象 $\prolim \alpha$, 即对于任意对象 $\Delta(X) \to \alpha$, 都有 $\Delta(\prolim \alpha)$ 使得图表交换
\[\begin{tikzcd}
	& {\Delta(\prolim \alpha)} \\
	\alpha & {\Delta(X)}
	\arrow[from=2-1, to=1-2]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-2, to=1-2]
\end{tikzcd} \Rightarrow \begin{tikzcd}
	{\alpha(i)} && {\alpha(j)} \\
	& {\prolim \alpha} \\
	& X
	\arrow["{{\alpha(i\to j)}}", from=1-1, to=1-3]
	\arrow[from=2-2, to=1-1]
	\arrow[from=2-2, to=1-3]
	\arrow[from=3-2, to=1-1]
	\arrow[from=3-2, to=1-3]
	\arrow[from=3-2, to=2-2]
\end{tikzcd}\]
这告诉我们 $\prolim \alpha$ 就是该范畴中的终对象, 称为极限. 因此归结出以下定义
\begin{definition}
令 $I$, $\cal{C}$ 为范畴. 考虑函子 $\alpha  \colon I \to \cal{C}$.
    \begin{itemize}
        \item $I \xrightarrow{j_{\alpha}}\mathcal{C}^I \xleftarrow{\Delta} \cal{C}$ 所确定的逗号范畴中若存在始对象则记作 $\indlim \alpha$, 称作 $\alpha$ 的\textbf{余极限}.
        \item $\mathcal{C} \xrightarrow{\Delta}\mathcal{C}^I \xleftarrow{j_{\alpha}} I$ 所确定的逗号范畴中若存在终对象则记作 $\prolim \alpha$, 称作 $\alpha$ 的\textbf{极限}.
    \end{itemize}
    此外, 可以将极限的泛性质表为(左侧为余极限泛性质而右侧为极限泛性质)
    \[\begin{tikzcd}
	{\alpha(i)} && {\alpha(j)} \\
	& {\indlim \alpha} \\
	& X
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-1, to=3-2]
	\arrow[from=1-3, to=2-2]
	\arrow[from=1-3, to=3-2]
	\arrow["{\exists !}"{description}, dashed, from=2-2, to=3-2]
    \end{tikzcd} \quad \text{以及} \quad \begin{tikzcd}
	{\alpha(i)} && {\alpha(j)} \\
	& {\prolim \alpha} \\
	& X
	\arrow[from=1-1, to=1-3]
	\arrow[from=2-2, to=1-1]
	\arrow[from=2-2, to=1-3]
	\arrow[from=3-2, to=1-1]
	\arrow[from=3-2, to=1-3]
	\arrow["{\exists !}"{description}, dashed, from=3-2, to=2-2]
\end{tikzcd}\]
\end{definition}
命题~\ref{命题:始对象存在则唯一} 说明(余)极限若存在则(在同构意义下)唯一.
\begin{lemma}[函子性]
    说明(余)极限具有函子性, 简言之, 有函子 $\indlim \colon I \to \cal{C}$ (或 $\prolim \colon I \to \cal{C}$).
\end{lemma}
\begin{proof}
    留作习题.
\end{proof}
\begin{example}[纤维积(拉回), 纤维余积(推出)]
    在某个 范畴 中, 我们把对象视为 空间 .
    假设有两个 态射  $f \colon B \to D$ 与 $g \colon C \to D$,
    这里 $B, C, D$ 都是空间.
    那么, 对每个 `` 点 '' $d \in D$,
    考虑态射 $f, g$ 的 纤维 , 即点 $d$ 的原像, 我们将其记为 $B_d$ 与 $C_d$.
    我们将 $B$ 视为所有纤维 $B_d$ 拼起来得到的空间,
    而将 $C$ 视为所有 $C_d$ 拼起来得到的空间.
    我们把这两个纤维乘起来, 得到 $B_d \times C_d$.
    最后, 把所有的乘积 $B_d \times C_d$ 拼起来, 得到一个大空间 $B \times_D C$,
    这就是 $B$ 与 $C$ 沿 $D$ 的纤维积.
    我们也有一个态射 $B \times_D C \to D$,
    其在点 $d$ 的纤维就是 $B_d \times C_d$.\footnote{图片来自香蕉空间.}
    \[\begin{tikzpicture}[scale=.9]
        \draw [line width=2] (0, 0) -- (-.4, -2);
        \fill [cyan!7]
            (-2, 1.2) -- (-2.4, -.8) -- (-3.9, .1) -- (-3.5, 2.1);
        \fill [cyan!7]
            (2, 1.2) -- (1.6, -.8) -- (3.1, .1) -- (3.5, 2.1);
        \foreach \i in {1, ..., 3} {
            \draw [thick, cyan!80] 
                (-3.5 - .1 * \i, 2.1 - .5 * \i) -- (-2 - .1 * \i, 1.2 - .5 * \i)
                (3.5 - .1 * \i, 2.1 - .5 * \i) -- (2 - .1 * \i, 1.2 - .5 * \i);
        }
        \foreach \i in {1, ..., 3} {
            \draw [thick, cyan!80, fill=cyan!10, fill opacity=.75] 
                (-.1 * \i, 4.2 - .5 * \i) -- (1.5 - .1 * \i, 3.3 - .5 * \i) --
                (-.1 * \i, 2.4 - .5 * \i) -- (-1.5 - .1 * \i, 3.3 - .5 * \i) -- cycle;
        }
        \draw [thick, cyan!80, loosely dashed]
            (-2.2, .2) -- (-.2, -1) -- (1.8, .2) -- (-.2, 1.4) -- cycle
            (-3.7, 1.1) -- (-1.7, 2.3)
            (3.3, 1.1) -- (1.3, 2.3);
        \fill [cyan!80] (-.2, -1) circle (.1);
        \draw [line width=1.2, -stealth] (-2.1, -.9) -- (-1.1, -1.5);
        \draw [line width=1.2, -stealth] (1.5, -.9) -- (.5, -1.5);
        \node [cyan!75!black] at (-.35, -.6) {$d$};
        \node [scale=1.2] at (-.2, -2.5) {$D$};
        \node [scale=1.2] at (-3.4, -.8) {$B$};
        \node [scale=1.2] at (2.7, -.8) {$C$};
        \node [scale=1.2] at (-1.8, -1.5) {$f$};
        \node [scale=1.2] at (1.2, -1.5) {$g$};
        \node [scale=1.2] at (0, 4.1) {$B \times_D C$};
        \node [cyan!75!black] at (-4.05, 1.2) {$B_d$};
        \node [cyan!75!black] at (3.65, 1.1) {$C_d$};
        \node [cyan!75!black] at (2.4, 3.4) {$B_d \times C_d$};
        \draw [cyan!75!black] (1.6, 3.3) -- (.6, 2.8);
    \end{tikzpicture}\]
    $B \dtimes{D} C$ 被称为拉回, 也被称为是纤维积.
    \begin{definition} [拉回, 纤维积]
    \label{拉回}
    设 $\mathcal{C}$ 是 范畴 .
    对于 $\mathcal{C}$ 中的 交换图
    \[\begin{tikzcd}
	& B \\
	C & D
	\arrow["f"', from=1-2, to=2-2]
	\arrow["g", from=2-1, to=2-2]
    \end{tikzcd}\]
    如果这个图表具有 极限 ,
    就把这个极限叫做 $B, C$ 关于 $D$ 沿映射 $f, g$ 的\textbf{拉回}.

    具体地说, 该拉回是指交换图表
    \[\begin{tikzcd}
	{B \dtimes{D} C} & B \\
	C & D
	\arrow["{g'}", from=1-1, to=1-2]
	\arrow["{f'}"', from=1-1, to=2-1]
	\arrow["f"', from=1-2, to=2-2]
	\arrow["g", from=2-1, to=2-2]
    \end{tikzcd}\]
    它满足以下 万有性质 :
    对任意对象 $A' \in \mathcal{C}$, 如果有交换图表
    \[\begin{tikzcd}
	{A'} & B \\
	C & D
	\arrow["{g''}", from=1-1, to=1-2]
	\arrow["{f''}"', from=1-1, to=2-1]
	\arrow["f"', from=1-2, to=2-2]
	\arrow["g", from=2-1, to=2-2]
    \end{tikzcd}\]
    则存在唯一的态射 $h \colon A' \to A$, 使得以下图表交换:
    \[\begin{tikzcd}
	{A'} \\
	& {B \dtimes{D} C} & B \\
	& C & D
	\arrow["{\exists! h}"{description}, dashed, from=1-1, to=2-2]
	\arrow["{g''}", curve={height=-18pt}, from=1-1, to=2-3]
	\arrow["{f''}"', curve={height=18pt}, from=1-1, to=3-2]
	\arrow["{g'}"', from=2-2, to=2-3]
	\arrow["{f'}", from=2-2, to=3-2]
	\arrow["f"', from=2-3, to=3-3]
	\arrow["g", from=3-2, to=3-3]
    \end{tikzcd}\]
    \end{definition}
    而其对偶构造被称为推出, 也称为纤维余积, 比如说对于图表 
    \[\begin{tikzcd}
	& B \\
	C & D
	\arrow["f"', from=2-2, to=1-2]
	\arrow["g", from=2-2, to=2-1]
    \end{tikzcd}\]
    的推出记为 $B \dsqcup{D} C$. 它表示将两个对象沿着该态射粘接起来的过程.
\end{example}
\begin{exercise}
    请读者使用我们刚刚的思路思考拉回和推出分别代表什么, 此外, 说明拉回相当于``原像'', 推出相当于``像''.
\end{exercise}
接下来我们讲述极限的第二种刻画方式: 令 $I^{\triangleleft}$ 和 $I^{\triangleright}$ 为在 $I$ 中形式地添加一个始对象或终对象, 即将图表变为
\[\begin{tikzcd}
	& \varnothing \\
	i && j
	\arrow[from=1-2, to=2-1]
	\arrow[from=1-2, to=2-3]
	\arrow[from=2-1, to=2-3]
\end{tikzcd} \quad\text{和} \quad \begin{tikzcd}
	i && j \\
	& {*}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-3, to=2-2]
\end{tikzcd}\]
此时有显然的函子 $I\to I^{\triangleleft}$ 和 $I \to I^{\triangleright}$. 此时考虑拉回(相当于限制态射对于 $\alpha$ 一点取逆)
\[\begin{tikzcd}
	{\Fct_\alpha{(I^{\triangleleft},\cal{C})}} & {\Fct(I^{\triangleleft},\cal{C})} \\
	{*} & {\Fct(I,\cal{C})}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["{\text{限制}}"', from=1-2, to=2-2]
	\arrow["\alpha", from=2-1, to=2-2]
\end{tikzcd}\]
我们就得到 $\Fct_{\alpha}(I^{\triangleleft},\cal{C})$ 称其为锥, 此时其中对象可以表为(不难发现限制在 $I$ 上为 $\alpha$).
\[\begin{tikzcd}
	& X \\
	{\alpha(i)} && {\alpha(j)}
	\arrow[from=1-2, to=2-1]
	\arrow[from=1-2, to=2-3]
	\arrow["{\alpha(i\to j)}", from=2-1, to=2-3]
\end{tikzcd}\]
因此考虑其中终对象即为极限. 反过来, 考虑 $\Fct_{\alpha}(I^{\triangleright},\cal{C})$ 其始对象就是余极限.\\
现在, 我们在集合范畴 $\cate{Set}$ 中刻画极限, 这一过程相当于在求解规划问题\footnote{当然, 这样可能并不严谨.}
\begin{align*}
    \min & \quad \prolim \alpha \in \cal{C}\\
    \op{s.t.} &\left\{
    \begin{array}{ccc}
         \prolim \alpha \to \alpha(i),& \forall i\in \Obj(I) \\
         \alpha(i) \xrightarrow{\alpha(i\to j)} \alpha(j), & \forall (i\to j) \in \Mor(I)\\
         \text{上述全体箭头均交换}
    \end{array}
    \right.
\end{align*}
我们可以分成两步来求解该规划问题, 首先解决 $\prolim \alpha \to \alpha(i)$, 这无非是在说将 $I$ 先视为离散范畴进行求解, 直接得到结果为积 $\prod_{I} \alpha(i)$. 而后不断加入条件, 不难发现, 在集合范畴中, 增加这些条件相当于得到以下集合
\[
\left\{(x_i)_{i\in \Obj(I)} \colon \forall (i\xrightarrow{\sigma} j) \in\Hom(i,j), \alpha(\sigma)(x_i) = x_j\right\}.
\]
而该操作对于一般具体的范畴也是使用的, 这估计就是古老文献中, 将极限称为``普适问题的解''的原因所在.\\
现在我们来刻画余极限, 这与极限是对偶的.
\begin{align*}
    \max & \quad \indlim \alpha \in \cal{C}\\
    \op{s.t.} &\left\{
    \begin{array}{ccc}
           \alpha(i)\to \indlim \alpha,& \forall i\in \Obj(I) \\
         \alpha(i) \xrightarrow{\alpha(i\to j)} \alpha(j), & \forall (i\to j) \in \Mor(I)\\
         \text{上述全体箭头均交换}
    \end{array}
    \right.
\end{align*}
由于此时为 $\alpha(i) \to \indlim \alpha$, 因此我们可以先考虑 $\alpha(i) \xrightarrow{\alpha(i\to j)}\alpha(j)$, 这相当于说在生成元上具有一些关系 : 对于 $x_i \in \alpha(i)$, 有 $x_i \sim x_j \Leftrightarrow \alpha(i\to j)(x_i) = x_j$. \\
然后我们来考虑由此生成的 $\indlim \alpha$, 这无非是在说先使用 $\alpha(i)$ 自由生成 $\indlim \alpha$, 而后商去这些关系(读者可以想象为某种群展示, 当然群展示确实也是一种余极限), 得到:
\[
    \coprod_{i\in I} \alpha(i) /\sim
\]
但是目前我们只给出了关系, 我们想要具体刻画等价关系还需要再滤过范畴之上(或者说我们需要将 $\alpha(i)$ 和 $\alpha(j)$ 中的信息拉到某个具体的对象 $\alpha(k)$ 上, 由此更加精确地刻画等价关系), 首先容许我介绍一下何谓滤过:
\begin{definition}[滤过]
    非空范畴 $I$ 若满足以下条件, 则称是\textbf{滤过}的:
    \begin{itemize}
        \item 对于任意 $i,j \in \Obj(I)$, 存在 $k \in \Obj(I)$, 使得 $i \to k$, $j \to k$.
        \item 对于任意 $f,g \colon i \to j$ 存在 $k \in \Obj(I)$ 以及 $h \colon j \to k$ 使得 $hf = hg$.
    \end{itemize}
\end{definition}
此时前文生成的等价关系可以具体的写为
\[
   \text{存在}\left\{
   \begin{array}{cc}
       f\colon i \to k ,  \\
       g \colon j \to k 
   \end{array}\right.
   \quad \text{使得} \quad \alpha(f)(x_i) = \alpha(g)(x_j)\in \alpha(k)
\]
现在, 我们来给出一些日后经常打交道的例子.
\begin{example}[积, 余积, 等子, 余等子]
    \begin{enumerate}
        \item 如前文一般, 取 $I$ 为离散范畴, 不妨把 $I$ 等同于 $\Obj(I)$. 此时 $\indlim \alpha$ 称作对象 $X_i\coloneqq \alpha(i)$ 的\textbf{余积}, 写作 $\coprod_{i\in I} X_i$; 相应地, $\prod_{i\in I} X_i \coloneqq \prolim \alpha$ 称为对象 $X_i$ 的\textbf{积}.
        \item 取 $I = $
        \begin{tikzcd}
	\bullet & \bullet
	\arrow[shift left, from=1-1, to=1-2]
	\arrow[shift right, from=1-1, to=1-2]
        \end{tikzcd}
        给出的范畴(两个对象, 两个非 $\identity$ 的态射), 此时 $\alpha \colon I \to \cal{C}$ 可以描述为 
        \begin{tikzcd}
	X & Y
	\arrow["f", shift left, from=1-1, to=1-2]
	\arrow["g"', shift right, from=1-1, to=1-2]
        \end{tikzcd}
        我们想要探究这两个态射中``相同''的部分, 放在集合上看, 就是讨论 $f,g$ 在 $X$ 中上使得 $f(x) = g(x)$ 的部分, 但是我们现在的工作环境是范畴, 无法描绘对象内部的东西, 因此我们需要迂回一下(这目前看来可能并不严谨), 我们从外部视角来看``相同''的部分, 它满足的条件就是在说对于 $\phi \colon T \to X$, 若其``像''(记作 $\Image(\phi)$, 反映了 $\phi$ 在 $X$ 上的信息)落在``相同部分''(记作 $\ker(f,g)$) 之内, 则 $f\phi = g\phi$, 图解为我们总是有该图表交换
        \[\begin{tikzcd}
	&& T \\
	{\Image(\phi)} & {\ker(f,g)} & X & Y
	\arrow[from=1-3, to=2-1]
	\arrow["\phi", from=1-3, to=2-3]
	\arrow[from=1-3, to=2-4]
	\arrow[hook, from=2-1, to=2-2]
	\arrow[hook, from=2-2, to=2-3]
	\arrow["f", shift left, from=2-3, to=2-4]
	\arrow["g"', shift right, from=2-3, to=2-4]
        \end{tikzcd}\]
        因此, 我们需要取``最大''的那个($\Image \phi$)\footnote{当然,此处的``最大''指的是根据 $\hookrightarrow$ 的关系下最大的一个.}, 即 $\ker(f,g)$ 为 $\alpha$ 的极限 $\prolim \alpha$, 其泛性质相当于在说有以下图表交换
        \[\begin{tikzcd}
	& T \\
	{\ker(f,g)} & X & Y
	\arrow["{\exists !}"{description}, dashed, from=1-2, to=2-1]
	\arrow["\phi", from=1-2, to=2-2]
	\arrow[from=1-2, to=2-3]
	\arrow[hook, from=2-1, to=2-2]
	\arrow["f", shift left, from=2-2, to=2-3]
	\arrow["g"', shift right, from=2-2, to=2-3]
        \end{tikzcd}\]
        $\ker(f,g)$ 由于描述的是``相等''的部分, 因此不妨称其为\textbf{等子}.
        我们可以反过来, 问把 $f$ 和 $g$ 的信息粘起来, $Y$ 还剩下什么(记为 $\Coker(f,g)$). 这在集合中相当于说商集 $Y/\sim$, 其中 $\sim$ 为 $f(x) \sim g(x)$ 所生成的等价关系. 现在我们仍然从外部来刻画这一点, 这相当于说对于 $\psi \colon Y \to T$, 若 $\psi f = \psi g$ 那相当于说你不仅粘了, 可能还粘多了, 因此这个时候根据商的性质, 我们应当有 $\Coker(f,g) \to T$. 因此选出最大的对象(即始对象)作为 $\Coker(f,g)$, 即
        \[\begin{tikzcd}
	& T \\
	X & Y & {\Coker(f,g)}
	\arrow[from=2-1, to=1-2]
	\arrow["f", shift left, from=2-1, to=2-2]
	\arrow["g"', shift right, from=2-1, to=2-2]
	\arrow["\psi"', from=2-2, to=1-2]
	\arrow[from=2-2, to=2-3]
	\arrow[dashed, from=2-3, to=1-2]
        \end{tikzcd}\]
        根据先前的叙述, 相当于在说 $\Coker(f,g)$ 为 $\alpha$ 的余极限 $\indlim \alpha$.
        \item 现在我们可以更加正式的定义像和余像. 对于 $\cal{C}$ 中态射 $f \colon X \to Y$, 则像为 $f$ 在 $Y$ 中的信息全体, 考虑推出
        \[\begin{tikzcd}
	X & Y \\
	Y & {Y\dsqcup{X} Y}
	\arrow["f", from=1-1, to=1-2]
	\arrow["f"', from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        则 $Y \to Y\dsqcup{X}Y$ 相当于将 $f$ 带来的信息进行粘接, 因此可以将像定义为等子
        \[
        \Image (f) \coloneqq \ker \left( \begin{tikzcd}
	Y & {Y\dsqcup{X}Y}
	\arrow[shift left, from=1-1, to=1-2]
	\arrow[shift right, from=1-1, to=1-2]
        \end{tikzcd}\right)
        \]
        类似地, 我们可以讨论 $f$ 所反映的 $X$ 中的信息(在集合中, 将 $f(x) = f(y)$ 作为等价关系商去), 考虑拉回
        \[\begin{tikzcd}
	{X\dtimes{Y} X} & X \\
	X & Y
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow["f"', from=1-2, to=2-2]
	\arrow["f", from=2-1, to=2-2]
        \end{tikzcd}\]
        则 $X\dtimes{Y} X \to X$ 相当于反映了 $f$ 中像相等的 $x$ 的等价类, 因此将余像定义为余等子
        \[
        \Coim(f) \coloneqq \Coker \left(
        \begin{tikzcd}
	{X\dtimes{Y} X} & X
	\arrow[shift left, from=1-1, to=1-2]
	\arrow[shift right, from=1-1, to=1-2]
        \end{tikzcd}
        \right)
        \]
        不难发现有典范态射
        \[\begin{tikzcd}
	X & Y \\
	{\Coim(f)} & {\Image(f)}
	\arrow["f", from=1-1, to=1-2]
	\arrow[two heads, from=1-1, to=2-1]
	\arrow[from=2-1, to=2-2]
	\arrow[hook, from=2-2, to=1-2]
        \end{tikzcd}\]
        读者可以验证: 
        \begin{center}
            $f$ 满 $\Leftrightarrow$ $\Image(f) \rightiso Y$ 且 $f$ 单 $\Leftrightarrow$ $X\rightiso \Coim(f)$
        \end{center}
        但是 $\Coim(f)$ 不一定同构于 $\Image(f)$, 因此即单又满的态射不一定是同构. 当 $\Coim(f) \rightiso \Image(f)$ 时, 我们称 $f$ 为\textbf{严格}态射.
        \item 商结构 $U/V$ 可以视为推出
        \[\begin{tikzcd}
	U & V \\
	0 & {U/V}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
    \end{enumerate}
\end{example}
注意到, 在一般的范畴 $\cal{C}$ 中, 函子 $\alpha$ 的极限或余极限不总是存在, 我们比较喜欢在对于任意小范畴 $I$, (余)极限总是存在的范畴上工作, 这种性质我们称为完备性(当然, 你完全可以类比为我们在完备的度量空间中工作, 这是没有任何问题的.)
\begin{definition}[完备]
    对于范畴 $\cal{C}$, 若对所有小范畴 $I$, 所有以 $I$ 为指标的 $\indlim$ 都存在, 则称之为\textbf{完备}的, 若所有以 $I$ 为指标的 $\prolim$ 都存在, 则称之为\textbf{余完备}的.
\end{definition}
\begin{example}
    \begin{itemize}
        \item 根据我们前文在 $\cate{Set}$ 上的构造可知 $\cate{Set}$ 是完备且余完备的.
        \item 在拓扑空间中, 我们有极限拓扑和余极限拓扑, 它搭配上对应的极限与余极限集合即可得到极限与余极限拓扑空间.
        \item 群范畴 $\cate{Grp}$ 也是完备的, 极限和余极限的构造与集合是一致的. 在群范畴中, 推出即为融合积.
    \end{itemize}
\end{example}

\subsection{应用 : Kan 延拓}
现在, 我们考虑范畴 $\cal{C},D,E$, 以及函子 $\mathcal{C} \xrightarrow{K}\cal{D}$ , $\mathcal{C} \xrightarrow{F} \mathcal{E}$, 如图所示
\[\begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow["F", curve={height=-12pt}, from=1-1, to=2-2]
	\arrow["{?}"{description}, dashed, from=2-1, to=2-2]
\end{tikzcd}\]
我们希望找到函子 $L\colon \mathcal{D} \to \mathcal{E}$ 使得 $LK$ 逼近于 $F$. 和极限一般, 我们有两种逼近方式, 一种是从较大的一侧往小逼近, 一种是较小一侧往大逼近.\\

不妨将``较大''的 $LK$ 放在左手, 较小的 $LK$ 放在右手, 回忆我们在第~\ref{函子范畴}~节对于函子与自然变换的看法, 可以得到
\[\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Straight Lines [id:da7102542369090952] 
\draw    (393.11,124.17) -- (414.11,124.17) ;
\draw [shift={(416.11,124.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da7341960176956119] 
\draw    (457.11,124.17) -- (478.11,124.17) ;
\draw [shift={(480.11,124.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da6127211899518781] 
\draw    (525.11,123.17) -- (546.11,123.17) ;
\draw [shift={(548.11,123.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da9966989226172298] 
\draw    (346.11,125.17) -- (363.11,125.17) ;
\draw [shift={(365.11,125.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da9273012188666165] 
\draw    (89.11,125.17) -- (106.11,125.17) ;
\draw [shift={(108.11,125.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da24458156378074092] 
\draw    (149.11,125.17) -- (166.11,125.17) ;
\draw [shift={(168.11,125.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da039540146815657096] 
\draw    (218.11,125.17) -- (235.11,125.17) ;
\draw [shift={(237.11,125.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da2812032899568666] 
\draw    (287.11,125.17) -- (304.11,125.17) ;
\draw [shift={(306.11,125.17)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da7961883799165974] 
\draw  [dash pattern={on 0.84pt off 2.51pt}]  (70.11,165.5) -- (304.11,165.5)(70.11,168.5) -- (304.11,168.5) ;
\draw [shift={(312.11,167)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da543630385168764] 
\draw  [dash pattern={on 0.84pt off 2.51pt}]  (591,168.5) -- (362.11,168.5)(591,165.5) -- (362.11,165.5) ;
\draw [shift={(354.11,167)}, rotate = 360] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Lamp [id:dp27791867232559975] 
\draw  [fill={rgb, 255:red, 248; green, 231; blue, 28 }  ,fill opacity=1 ] (321,173.97) -- (321,161.51) .. controls (321,158.38) and (324.39,155.84) .. (328.56,155.84) .. controls (332.73,155.84) and (336.11,158.38) .. (336.11,161.51) -- (336.11,173.97) -- (321,173.97) -- cycle (324.02,178.51) -- (324.02,167.17) .. controls (324.02,165.3) and (326.05,163.77) .. (328.56,163.77) .. controls (331.06,163.77) and (333.09,165.3) .. (333.09,167.17) -- (333.09,178.51) ;
%Straight Lines [id:da2531485777379041] 
\draw [color={rgb, 255:red, 155; green, 155; blue, 155 }  ,draw opacity=0.5 ][line width=3]    (591,168.5) -- (374,168.5)(591,165.5) -- (374,165.5) ;
%Shape: Free Drawing [id:dp0409551019615928] 
\draw  [color={rgb, 255:red, 0; green, 0; blue, 0 }  ,draw opacity=1 ][line width=5.25] [line join = round][line cap = round] (374.22,166.67) .. controls (374.22,166.67) and (374.22,166.67) .. (374.22,166.67) ;

% Text Node
\draw (321,118.4) node [anchor=north west][inner sep=0.75pt]    {$F$};
% Text Node
\draw (364,117.4) node [anchor=north west][inner sep=0.75pt]    {$L_{1} K$};
% Text Node
\draw (416,116.4) node [anchor=north west][inner sep=0.75pt]    {$L_{2} K$};
% Text Node
\draw (483,116.4) node [anchor=north west][inner sep=0.75pt]    {$L_{3} K$};
% Text Node
\draw (558,117.4) node [anchor=north west][inner sep=0.75pt]    {$\cdots $};
% Text Node
\draw (243,117.4) node [anchor=north west][inner sep=0.75pt]    {$L_{1} 'K$};
% Text Node
\draw (350,176) node [anchor=north west][inner sep=0.75pt]   [align=left] {接近 $\displaystyle F$};
% Text Node
\draw (269,176) node [anchor=north west][inner sep=0.75pt]   [align=left] {接近$\displaystyle F$};
% Text Node
\draw (171,117.4) node [anchor=north west][inner sep=0.75pt]    {$L_{2} 'K$};
% Text Node
\draw (112,117.4) node [anchor=north west][inner sep=0.75pt]    {$L_{3} 'K$};
% Text Node
\draw (55,176) node [anchor=north west][inner sep=0.75pt]   [align=left] {远离 $\displaystyle F$};
% Text Node
\draw (552,176) node [anchor=north west][inner sep=0.75pt]   [align=left] {远离 $\displaystyle F$};
% Text Node
\draw (58,118.4) node [anchor=north west][inner sep=0.75pt]    {$\cdots $};


\end{tikzpicture}\]
其中箭头均为自然变换, 现在我们寻求对于 $F$ 的逼近, 就相当于说以 $F$ 为中心, 我们向从某一侧往中间逼近(即为图中带虚线的箭头).\\
现在我们以从右向左的逼近为例, 此时不妨将 $F$ 视为灯泡(图中亮黄灯的), 而取定的函子 $L$ 为一个物体, 则灯泡产生的影子即为 $L$ 可以往``更小''的对象中投射自然变换的部分. 因此最接近于 $F$ 的 $LK$ 应当对于任意``小于'' $F$ 的 $L';K$ 的$L'$ 都带有自然变换 $L \Rightarrow L'$. 我们将如此得到的 $L$ 称为 $F$ 沿着 $K$ 的左 Kan 延拓, 对偶地, 从左侧往右的逼近称为右 Kan 延拓.
\begin{definition}[Kan延拓]\label{Def:Kan延拓}
    考虑范畴$\mathcal{C,D,E}$间的图表
    \[\begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow["F", curve={height=-10pt}, from=1-1, to=2-2]
    \end{tikzcd}\]
    其中$K \colon \mathcal{C} \to \mathcal{D}$, $F\colon \mathcal{C} \to \mathcal{E}$.
    \begin{itemize}
        \item 函子$F$沿$K$的左Kan延拓意谓以下资料$(\Lan_K F,\eta)$,其中
        \begin{itemize}
            \item $\Lan_KF\colon \mathcal{D} \to \mathcal{E}$是函子.
            \item $\eta \colon F\to (\Lan_K F)K$是函子间的态射.
        \end{itemize}
        使得以下泛性质成立:对任何资料$L \colon\mathcal{D} \to \mathcal{E}$,和$\xi \colon F \to LK$,存在唯一的态射$\chi\colon \Lan_K F \to L$使得$\xi = (\chi K)\eta$(态射的纵横合成),或以2-胞腔图解为
        \[\begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=1-1, to=2-2]
	\arrow["L"', from=2-1, to=2-2]
	\arrow["\xi"{description}, shorten <=4pt, Rightarrow, from=0, to=2-1]
        \end{tikzcd}=
        \begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=1-1, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\Lan_K F}"', from=2-1, to=2-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "L"', curve={height=30pt}, from=2-1, to=2-2]
	\arrow["\eta"{description}, shorten <=4pt, Rightarrow, from=0, to=2-1]
	\arrow["\chi", shorten <=7pt, shorten >=2pt, Rightarrow, from=1, to=2]
    \end{tikzcd}\]
    \item 函子$F$沿$K$的右延拓意谓以下资料$(\Ran_K F , \varepsilon)$,其中
    \begin{itemize}
        \item $\Ran_K F\colon \mathcal{D} \to \mathcal{E}$是函子.
        \item $\varepsilon\colon (\Ran_K F)K \to F$是函子间的态射.
    \end{itemize}
    使得以下泛性质成立:对任何资料$R \colon \mathcal{D} \to \mathcal{E}$和$\delta \colon RK \to F$,存在唯一的$\theta \colon R \to (\Ran_KF)K$使得$\delta = \varepsilon(\theta K)$,或用2-胞腔图解为
    \[\begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=1-1, to=2-2]
	\arrow["R"', from=2-1, to=2-2]
	\arrow["\delta"{description}, shorten >=4pt, Rightarrow, from=2-1, to=0]
\end{tikzcd}=\begin{tikzcd}
	{\mathcal{C}} \\
	{\mathcal{D}} & {\mathcal{E}}
	\arrow["K"', from=1-1, to=2-1]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F", curve={height=-12pt}, from=1-1, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\Ran_K F}"', from=2-1, to=2-2]
	\arrow[""{name=2, anchor=center, inner sep=0}, "R"', curve={height=30pt}, from=2-1, to=2-2]
	\arrow["\varepsilon"{description}, shorten >=4pt, Rightarrow, from=2-1, to=0]
	\arrow["\theta", shorten <=2pt, shorten >=7pt, Rightarrow, from=2, to=1]
    \end{tikzcd}\]
    \end{itemize}
\end{definition}
使用函子范畴 $\mathcal{E}^{\mathcal{C}}$ 以及 $\mathcal{E}^{\mathcal{D}}$ 的概念, 可以发现左, 右 Kan 延拓分别在说有双射
\begin{align*}
    \Hom_{\mathcal{E}^{\mathcal{D}}}(\Lan_K F,L) &\xrightarrow{1:1} \Hom_{\mathcal{E}^{\mathcal{C}}}(F,LK)\\
    \chi &\mapsto (\chi K)\eta,\\
    \Hom_{\mathcal{E}^{\mathcal{D}}}(R,\Ran_K F) &\xrightarrow{1:1} \Hom_{\mathcal{E}^{\mathcal{C}}}(RK,F)\\
    \theta &\mapsto \varepsilon(\theta K);
\end{align*}
证明这一点只需要观察到 $\xi \colon F \Rightarrow L$ 都唯一确定了一个 $\chi$, 而 $\chi$ 又可以反向决定 $\xi = (\chi K)\eta$ 即可. \\
此外 Kan 延拓还有诸多的性质, 不过受限于本文讲解顺序, 将会在伴随函子之后讲解.
\subsection{可表函子,自由余完备化}
本节将介绍一些``广义对象'', 可以理解为漂浮在范畴上的幽灵, 事实上, 一般的函子都可以视为这样的广义对象, 不过目前我们主要关注取值在集合上的情况, 这种广义对象称为(集合)预层, 该定义有一些拓扑学渊源, 我们先来看拓扑空间上的情况.
\begin{definition}[$\mathcal{D}$-值预层]
    令 $X$ 为拓扑空间, $\mathcal{D}$为范畴, $\open(X)$为$X$上开集构成(以包含关系作为态射)的范畴.则$X$上的$\mathcal{D}$-值预层$\mathcal{F}$就是一个函子
    \[
        \mathcal{F}: \open(X)^{\opposite} \to \mathcal{D}
    \]
    也即$\open(X)$到$\mathcal{D}$的一个反变函子.将全体$\mathcal{D}$-值预层构成的范畴记为$\presheaves(\open(X),\mathcal{D})$,特别地,取$\mathcal{D} = \operatorname{Set}$时记为$\open(X)^{\land}$.
\end{definition}
这样的定义有些许的抽象,但是我们可以将其显式的写出来\footnote{抄的预层的代码.}
\begin{definition}
    设 $X$ 是拓扑空间, $\mathcal{D}$ 是范畴.
    则 $X$ 上取值于 $\mathcal{D}$ 的\textbf{预层} $\mathcal{F}$
    由以下信息组成:
    \begin{itemize}
        \item
            对每个开集 $U \subset X$, 有一个对象
            \[
                \mathcal{F} (U) \in \mathcal{D},
            \]
            称为 $U$ 上 $\mathcal{F}$ 的所有\textbf{截面}构成的空间.
        \item
            对任两个开集 $U \subset V \subset X$, 有一个 $\mathcal{D}$ 中的态射
            \[
                \operatorname{res}_U^V
                \colon \mathcal{F} (V) \to \mathcal{F} (U),
            \]
            称为\textbf{限制映射}.
            这个映射通常也记为 $(-)|_U$.

            限制映射还满足如下函子性要求:
            \begin{itemize}
                \item $\operatorname{res}_U^U = \identity_{\mathcal{F} (U)}$.
                \item 对于任意满足 $U \subset V \subset W$ 的开集,都有 
                $\operatorname{res}_U^W = \operatorname{res}_U^V \circ 
                \operatorname{res}_V^W$.
            \end{itemize}
    \end{itemize}
    当 $\mathcal{D} = \mathsf{Set}$ 为集合范畴时,
    通常称 $\mathcal{F}$ 为\textbf{集合预层};
    当 $\mathcal{D} = \mathsf{Ab}$ 为Abel 群范畴时,
    通常称 $\mathcal{F}$ 为\textbf{Abel 预层}, 以此类推.
\end{definition}
\begin{remark}
    不妨将预层视为 $U$ 上一堆函数的集合, 而限制映射此时就可以视为函数的限制, 因此自然为反变函子.
\end{remark}
接下来将定义推广到一般范畴上, 不难发现 $\presheaves(\mathcal{C},\mathcal{D})$ 即为 $\Fct(\mathcal{C}^{\opposite},\mathcal{D})$. 本节取 $\mathcal{D} = \cate{Set}$, 将对应预层范畴记为 $\mathcal{C}^{\wedge}$.\\
此外, 还可以定义 
\[
    \mathcal{C}^{\vee} \coloneqq \Fct(\mathcal{C}^{\opposite},\cate{Set}^{\opposite}) = \Fct(\mathcal{C},\cate{Set})^{\opposite}.
\]
接下来观察 $\Hom$-集, 不难发现 $\Hom$-集实际上可以视为双函子 
\begin{align*}
    \Hom \colon \mathcal{C}^{\opposite} \times \mathcal{C} &\to \cate{Set}\\
    (X,Y) &\mapsto \Hom_{\cal{C}}(X,Y).
\end{align*}
前一个 $\mathcal{C}$ 为反变的原因在于 $f \colon X' \to X$ 可以诱导拉回 $(X \xrightarrow{a} Y) \mapsto (X' \xrightarrow{a\circ f}Y) \in \Hom(X',Y)$.\\
现在, 我们只选定一个部分, 得到函子 $h_{\mathcal{C}}$ 与 $k_{\mathcal{C}}$ 如下
\begin{align*}
    h_{\mathcal{C}} \colon \mathcal{C} &\to \mathcal{C}^{\wedge}\\
    S &\mapsto \Hom_{\cal{C}}(-,S)\\
    k_{\mathcal{C}} \colon \mathcal{C} &\to \mathcal{C}^{\vee}\\
    S &\mapsto \Hom(S,-).
\end{align*}
此时具有自然地求值函子
\[
\ev^{\wedge} \colon \mathcal{C}^{\opposite}\times \mathcal{C}^{\wedge} \to \cate{Set}, \quad (S,A) \mapsto A(S)
\]
以及对偶版本. 
我们有以下重要引理
\begin{lemma}[Yoneda 引理]\label{引理:Yoneda}
    对于 $S \in \Obj(\mathcal{C})$ 以及 $A \in \Obj(\mathcal{C}^{\land})$ 映射
    \begin{align*}
        \Hom_{\mathcal{C}^{\wedge}}(h_{\mathcal{C}}(S),A) &\to A(S)\\
        \left(\Hom_{\cal{C}}(-,S)\xRightarrow{\phi} A(-)\right) &\mapsto \phi_S(\identity_S)
    \end{align*}
    为双射; 它给出函子的同构 $\Hom_{\cal{C}^{\wedge}}(h_{\mathcal{C}}(-),-) \rightiso \ev^{\wedge}$. 函子 $h_{\cal{C}}$ 是全忠实的.\\
    反之可以得到对偶情况.
\end{lemma}
\begin{proof}
    该证明其实是无趣的集合论证明, 只需证明上述映射可逆. 也就是说对于 $A(S)$ 中的元素 $u_S$, 我们要将其视为某个自然变换 $\phi$ 的像 $\phi_S(\identity_S)$, 而后反向构造出对应的 $\phi$ 即可. 考虑图表
    \[\begin{tikzcd}
	{\identity_S} & {\Hom_{\cal{C}}(S,S)} & {A(S)} & {u_S} \\
	f & {\Hom_{\cal{C}}(T,S)} & {A(T)} & { A(f)(u_S)}
	\arrow["\in"{marking, allow upside down}, draw=none, from=1-1, to=1-2]
	\arrow[maps to, from=1-1, to=2-1]
	\arrow["{\phi_S}", from=1-2, to=1-3]
	\arrow["{f^{}*}"', from=1-2, to=2-2]
	\arrow["{A(f)}", from=1-3, to=2-3]
	\arrow["\in"{marking, allow upside down}, draw=none, from=1-4, to=1-3]
	\arrow[maps to, from=1-4, to=2-4]
	\arrow["\in"{marking, allow upside down}, draw=none, from=2-1, to=2-2]
	\arrow["{\phi_T}"', from=2-2, to=2-3]
	\arrow["\in"{marking, allow upside down}, draw=none, from=2-4, to=2-3]
    \end{tikzcd}\]
    道尽半切. 此时显然有 $\phi_S(\identity_S) = u_S$, 而根据图表交换性可知 $A(f)\phi_S(\identity_S) = \phi_T(f)$, 由此又给出 $\phi\colon \Hom_{\mathcal{C}}(-,S) \xRightarrow{\phi} A(-)$.\\
    至于全忠实性考虑 $A = h_{\mathcal{C}}(T)$, 得到 
    \[
    \Hom_{\mathcal{C}^{\wedge}}(h_{\mathcal{C}}(S),h_{\mathcal{C}}(T)) \rightiso \Hom_{\mathcal{C}}(T,S).
    \]
\end{proof}
\begin{remark}
    Yoneda 引理告诉我们,
范畴中的对象由所有别的对象到它的态射所完全描述.
例如, 对一个拓扑空间 $X$ 而言,
如果对任何别的拓扑空间 $Y$,
都知道从 $Y$ 到 $X$ 的所有连续映射构成的集合 $\Hom_{\mathsf{Top}} (Y, X)$ 是什么样,
那我们也就能知道 $X$ 是哪个拓扑空间.
换言之, 我们可以用别的空间 $Y$ 来 ``探测'' $X$ 的拓扑.\\
Yoneda 观点是指, 对于范畴中的对象 $X$ 而言,
我们将 $X$ 等同于别的对象到它的态射的信息, 我们暂且成为 ``探测信息''.
这样, 一份合理的探测信息应该(通过同构)能确定(预层)范畴中的对象.
然而, 有时这样的对象实际并不在原来的范畴中, 我们就称其被该对象被该信息表出.
\end{remark}
\begin{definition}[可表性]
    称 $A \colon \mathcal{C}^{\opposite} \to \cate{Set}$ 是可表函子, 如果存在 $X \in \Obj(\cal{C})$ 以及同构 $\phi \colon h_{\cal{C}}(X) \rightiso A$. 此时称 $(X,\phi)$ 表出了 $A$, 称其为代表元.
\end{definition}
\begin{remark}
    由 Yoneda 引理的证明可知: 给定资料 $(X,\phi)$ 相当于给定 $(X,u)$ 其中 $u = \phi_X(\identity_X) \in A(X)$.
\end{remark}
有鉴于此, 可以使用 $(X,u)$, $u\in A(X)$ 来表述 $A$, 此时称 $u$ 为泛族; 这起源于模空间的研究.
\begin{lemma}
    若 $A$ 可被 $(X,\phi)$ 所表出, 则代表元在相差至多一个同构的意义下是唯一的.
\end{lemma}
\begin{proof}
    留作习题.
\end{proof}
\begin{example}[子对象分类子]
    在 $\cate{Set}$ 中, 任意子集 $A \subset X$ 都对应于特征映射 $\chi_A\colon X \to \{0,1\}$, 将 $A$ 中元素对应于 $1$ 而其它元素为 $0$. 使得我们有拉回图表
    \[\begin{tikzcd}
	A & {\{1\}} \\
	X & {\{0,1\}}
	\arrow[from=1-1, to=1-2]
	\arrow[hook, from=1-1, to=2-1]
	\arrow["{\text{子对象分类子}}", hook, from=1-2, to=2-2]
	\arrow["{\chi_A}"', from=2-1, to=2-2]
    \end{tikzcd}\]
    可以视为对于 $X$ 的``分类''. \\
    在范畴 $\cal{C}$ 中, 若存在拉回且子对象函子(定义~\ref{定义-子对象}) $\Sub \colon \cal{C}^{\opposite} \to \cate{Set}$ 可表, 则存在 $\Omega$ 使得
    \[
    \Sub_{\cal{C}}(X) \simeq \Hom_{\cal{C}}(X,\Omega)
    \]
    此时 $\Omega$ 称为 $\cal{C}$ 的子对象分类子.\\
    由前文不难看出 $\{0,1\}$ 为 $\cate{Set}$ 的子对象分类子.因此我们可以得知 $\Hom_{\cate{Set}}(X,\{0,1\}) = \Sub_{\cal{C}}(X) = \mathcal{P}(X)$. 即幂集可表. \footnote{这也是某群入群题的fancy解法.}
\end{example}
\begin{example}[Eilenberg-Maclane 空间]
    Eilenberg-Maclane 空间 $X = K(M,n)$ 为使得 $\pi_n(X) \simeq M$ 而 对于 $k \neq n$ 有 $\pi_k(X) =0 $ 的 CW 复形. 它表示了约化上同调函子 $H^n(-,M)$, 即 
    \[
    H^n(-;M) \simeq [-,K(M,n)]_* = \Hom_{h\cate{Top}_*}(-,K(M,n)).
    \].
    在\cite{aguilar2002algebraic}中, 就使用上述定义直接定义出上同调.
\end{example}

\subsubsection{题外话 :层, 预层的前推拉回}
层是一种可以粘接的预层(当然, 这依赖于拓扑), 或者说是满足``局部决定整体'' 性质的预层, 本小节考虑拓扑空间上的预层 $\cal{F}$.\\
对于拓扑空间 $E$ 的开集 $U$, 取其任意一族开覆盖 $\{U_i\}_{i\in I}$, 所谓``粘接''首先就是说 $\mathcal{F}(U)$ 的信息完全可以由 $\{\mathcal{F}(U_i)\}_{i\in I}$ 所确定, 更准确来说, 对于 $i,j \in I$, 考虑限制态射 $\mathcal{F}(U_i) \to \mathcal{F}(U_i\cap U_j)$ 以及 $\mathcal{F}(U_j) \to \mathcal{F}(U_i\cap U_j)$, 它们相等的信息给出了粘接的条件, 或者说我们可以把这部分粘接起来, 这样我们得到的结果是在 $\mathcal{F}(U_i) \times \mathcal{F}(U_j)$ 中使得它们限制在 $\mathcal{F}(U_i \cap U_j)$ 上相同的部分. 现在我们考虑整个开覆盖以及限制态射
\[\begin{tikzcd}
	{\prod_{i\in I}\mathcal{F}(U_i)} & {\prod_{i,j\in I}\mathcal{F}(U_i \cap U_j)}
	\arrow[shift left, from=1-1, to=1-2]
	\arrow[shift right, from=1-1, to=1-2]
\end{tikzcd}\]
它们中相等的部分进行粘接, 得到的结果就是等子. 而我们考虑任意的开覆盖, 就可以将所有的东西粘接出来, 并且因此 $\mathcal{F}(U)$ 应当被定义为等子图表
\[\begin{tikzcd}
	{\mathcal{F}(U)} & {\prod_{i\in I}\mathcal{F}(U_i)} & {\prod_{i,j\in I}\mathcal{F}(U_i \cap U_j)}
	\arrow[from=1-1, to=1-2]
	\arrow[shift left, from=1-2, to=1-3]
	\arrow[shift right, from=1-2, to=1-3]
\end{tikzcd}\]
由此总结出层的定义
\begin{definition}[$\mathcal{D}$-值层]\label{定义:拓扑空间上的层公理}
    设$X$为拓扑空间, $\mathcal{D}$为范畴,设$\mathcal{F}\in \presheaves(\open(X),\mathcal{D})$.满足以下条件的预层$\mathcal{F}$被称为是一个层:对任意开集$U\subset X$以及$U$的任意开覆盖$(U_i\hookrightarrow U)_{i\in I}$图表
    \[
        \mathcal{F} (U)
        \to \prod_{i \in I} \mathcal{F} (U_i)
        \rightrightarrows \prod_{j,k \in I} \mathcal{F} (U_j \cap U_k)
    \]
    都是等子图表, 其中
    \begin{itemize}
        \item
            左边的箭头将 $\mathcal{F} (U)$ 限制到每个 $\mathcal{F} (U_i)$.
        \item
            右边上方的箭头将每个 $\mathcal{F} (U_i)$ 限制到每个 $\mathcal{F} (U_i \cap U_k)$.
        \item
            右边下方的箭头将每个 $\mathcal{F} (U_i)$ 限制到每个 $\mathcal{F} (U_j \cap U_i)$.
    \end{itemize}
    此图表称为\textbf{层公理}.
\end{definition}
接下来举几个层与预层并非层的例子.
\begin{example}
    \begin{enumerate}
        \item 设$X$为拓扑空间,定义其上的连续函数层$\mathcal{F}$为
        \[
            \mathcal{F}(U) := \left\{\text{连续函数} U \to \R \right\}
        \]
        \item 取$X = \R^n$或微分流形时,定义其上的光滑函数层$\mathcal{F}$为
        \[
            \mathcal{F}(U) := \left\{ C^{\infty} \text{函数} U \to \R\right\}
        \]
        \item 取$X$为拓扑空间, $A\in \operatorname{Ab}$为Abel群,定义$X$上取值于$A$的局部常值层$\underline{A}_X$为
        \[
            \underline{A}_X := \left\{ \text{局部常值函数} U \to A \right\}
        \]
        此处$A$予以离散拓扑.
    \end{enumerate}
\end{example}
关于层的进一步操作与代数拓扑的主题无关, 可阅读任何一本现代代数几何学教材.\\

接下来说明两个关于预层的操作,分别称为前推预层和拉回预层,它可以帮助我们去变换不同的拓扑空间.\\
现在考虑$f : X \to Y$为拓扑空间之间的连续映射,我们想定义出两种操作,一种是把$X$上的层推到$Y$上,而另一种是把$Y$上的层拉回到$X$上,这样才方便我们比较不同拓扑空间上的层.
\begin{definition}[前推预层]
    设$X,Y$为拓扑空间,$\mathcal{D}$为完备且余完备的范畴, $\mathcal{F}\in \presheaves(\open(X),\mathcal{D})$为$\mathcal{D}$-值预层, $f:X \to Y$为连续映射,可以得到其对应的连续函子$\open(Y) \to \open(X)$,它把$U\in \open(Y)$映为$f^{-1}(U)\in \open(X)$,此处将连续函子视同函子$K:\open(Y)^{\opposite}\to \open(X)^{\opposite}$.称$K^* : \presheaves(\open(X),\mathcal{D})\to \presheaves(\open(Y),\mathcal{D})$为$\mathcal{D}$-值预层范畴的前推函子它将预层$\mathcal{F}\in \presheaves(\open(X),\mathcal{D})$映为$Y$上的预层
    \[
        K^*\mathcal{F}: V\mapsto \mathcal{F}(f^{-1}V)
    \]
    此时$K^*\mathcal{F}$一般记为$f_*\mathcal{F}$称为$\mathcal{F}$关于$f$的前推预层.
\end{definition}
不难发现前推预层的定义可以毫无困难地延拓到层的情况上,此时称为前推层.既然有前推,我们还希望定义一个拉回的操作, 这时, 我们就可以应用我们先前学习的 Kan 延拓.
\begin{definition}[拉回预层]
    设$X,Y$为拓扑空间,$\mathcal{D}$为完备且余完备的范畴, $f:X \to Y$为连续映射,可以得到函子$K:\open(Y)^{\opposite}\to \open(X)^{\opposite}$.设$\mathcal{G}\in \presheaves(\open(Y),\mathcal{D})$为$Y$上的$\mathcal{D}$-值预层,而后考虑$\mathcal{G}$沿$K$的左Kan 延拓,以2-胞腔图解为
    \[\begin{tikzcd}
	{\open(Y)^{\opposite}} \\
	{\open(X)^{\opposite}} & {\mathcal{D}}
	\arrow["K", from=1-1, to=2-1]
	\arrow["{\mathcal{G}}", bend left=40, from=1-1, to=2-2]
	\arrow["{\operatorname{Lan}_K\mathcal{G}}"', from=2-1, to=2-2]
   \end{tikzcd}\]
   称$\operatorname{Lan}_K\mathcal{G}$为$\mathcal{G}$沿$f$的拉回预层,在代数几何语境下称为逆像,简记为$f^{-1}\mathcal{G}$\footnote{在模层情况下拉回为$f^*\mathcal{G}$,为避免冲突使用$f^{-1}\mathcal{G}$},在非代数几何的语境下记为$f^*\mathcal{G}$.具体写出即为
   \[
    f^{-1}\mathcal{G} : U \mapsto \underset{\substack{V\in \open(Y) \\ U\hookrightarrow f^{-1}V}}{\indlim}\mathcal{G}(V)
   \]
   这是因为
   \[
    U\hookrightarrow f^{-1}V \xleftrightarrow{\text{对应}} \open(X)^{\opposite}\text{的态射}K(V) \to U.
   \]
\end{definition}

\subsection{伴随函子}
在线性代数中, 我们曾对于非退化的双线性形式定义过伴随\cite[$\S 8.2$]{李文威线代}, 现在我们简要回顾它的概念:
对于有限维 $\Bbbk$-向量空间 $V$ 和 $W$,
\begin{center}
    指定非退化双线性形式 $V \times W \xrightarrow{B}\Bbbk$ $\xLeftrightarrow{\qquad}$ 指定同构 $\varphi \colon W \rightiso V^{\vee}$ $\xLeftrightarrow{\qquad}$ 指定同构 $\psi \colon V \rightiso W^{\vee}$.
\end{center}
而 $B$ 在这些同构之下对应到 $V$ 或 $W$ 上的典范配对. 事实上, 双线性形式 $B$ 可以用来表示对偶空间的所有元素, 更精确地说:
\begin{itemize}
    \item 对于 $\lambda \in V^{\vee}$, 存在唯一的 $w \in W$ 使得 $\lambda = \varphi(w) \coloneqq B(-,w)$;
    \item 对于 $\eta \in W^{\vee}$, 存在唯一的 $v \in V$ 使得 $\eta = \psi(v) \coloneqq B(v,-)$.
\end{itemize}
现在, 给定两个双线性形式 $B_1$ 和 $B_2$, 设 $B_1$ 非退化. 考虑以下两种情况
\[\begin{tikzcd}
	{V_1} & {V_1'} \\
	&& F \\
	{V_2} & {V_2'}
	\arrow["\times"{marking, allow upside down}, draw=none, from=1-1, to=1-2]
	\arrow["T"', from=1-1, to=3-1]
	\arrow["{B_1}", from=1-2, to=2-3]
	\arrow["\times"{marking, allow upside down}, draw=none, from=3-1, to=3-2]
	\arrow[dashed, from=3-2, to=1-2]
	\arrow["{B_2}"', from=3-2, to=2-3]
\end{tikzcd} \quad 
\begin{tikzcd}
	{V_1} & {V_1'} \\
	&& F \\
	{V_2} & {V_2'}
	\arrow["\times"{marking, allow upside down}, draw=none, from=1-1, to=1-2]
	\arrow["{B_1}", from=1-2, to=2-3]
	\arrow["T", from=1-2, to=3-2]
	\arrow[dashed, from=3-1, to=1-1]
	\arrow["\times"{marking, allow upside down}, draw=none, from=3-1, to=3-2]
	\arrow["{B_2}"', from=3-2, to=2-3]
\end{tikzcd}\]
其中 $T$ 是给定的线性映射, 我们寻求虚线所示的线性映射, 它和 $T$ 之间须具备某种翘班似的``伴随关系''.
\begin{definition}[线性映射的伴随映射]
    考虑双线性形式 $B_i \in \op{Bil}(V_i,V_i';F)$, 其中 $i = 1,2$, 其中所有向量空间均有限维, 并假设 $B_1$ 非退化.
    \begin{enumerate}
        \item 存在唯一的线性映射
        \begin{align*}
            \Hom(V_1,v_2) &\to \Hom(V_2',V_1')\\
            T &\mapsto T^*,
        \end{align*}
        其中 $T^*$ 称为 $T$ 相对于 $B_1$ 和 $B_2$ 的\textbf{右伴随}, 由下式刻画:
        \[
        B_2(Tv_1,v_2') = B_1(v_1,T^* v_2'), v_1 \in V_1, v_2' \in V_2'
        \]
        \item 存在唯一的线性映射
        \begin{align*}
            \Hom(V_1',v_2') &\to \Hom(V_2,V_1)\\
            T &\mapsto ^*T,
        \end{align*}
        其中 $^* T$ 称为 $T$ 相对于 $B_1$ 和 $B_2$ 的\textbf{左伴随}, 由下式刻画:
        \[
        B_2(v_2,Tv_1') = B_1(^*Tv_2,v_1'), v_1'\in V_1', v_2 \in V_2.
        \]
    \end{enumerate}
\end{definition}
现在, 我们 $B_1$ 视为 $\Hom_{\cal{C}}$ 而 $B_2$ 视为 $\Hom_{\cal{D}}$, 且 $T$ 变为函子, 则我们可以给出伴随在范畴上的推广\footnote{当然, 这只是一种形式上的推广.}.
\begin{definition}[伴随函子]
    设 $\mathcal{C},\mathcal{D}$ 为范畴, 设有函子 $F \colon \mathcal{C} \to \mathcal{D}$ 与 $G \colon \mathcal{D} \to \mathcal{C}$. 称 $F$ 和 $G$ 构成一对\textbf{伴随函子}, 如果对 $x\in \mathcal{C}$ 和 $y \in \mathcal{D}$, 有自然同构
    \[
    \varphi \colon \Hom_{\mathcal{D}}(Fx,y) \simeq \Hom_{\mathcal{C}}(x,Gy),
    \]
    此时, 将两边视为 $\mathcal{C}^{\opposite} \times \mathcal{D} \to \cate{Set}$ 的函子.\\
    此时, 称 $F$ 是 $G$ 的\textbf{左伴随}, $G$ 是 $F$ 的\textbf{右伴随}, 并记 $F\dashv G$, 称 $(F,G,\varphi)$ 为伴随对.
\end{definition}
对于两个态射 $f \colon Fx \to y$ 以及 $g \colon x \to Gy$, 称它们是\textbf{相伴的}, 指在伴随函子的角度下它们互相对应, 此时称 $g$ 为 $f$ 的\textbf{右伴}而 $f$ 为 $g$ 的\textbf{左伴}. 有时也记 $g = f^{\sharp}$ 以及 $f = g^{\flat}$.\\
现在我们来介绍常见的诸多伴随
\begin{example}[自由-遗忘伴随]
    自由-遗忘伴随是伴随函子的一类经典例子, 比方 $F \colon \cate{Set} \to \cate{Vect}(\Bbbk)$ 将集合 $X$ 映为其生成的自由模 $\bigoplus_{x\in X}\Bbbk$, 而遗忘函子 $G \colon \cate{Vect}(\Bbbk) \to \cate{Set}$ 又将其遗忘为集合(即将向量空间视为集合). 则等式
    \[
    \Hom_{\cate{Vect}(\Bbbk)}(FX,V) \simeq \Hom_{\cate{Set}}(X,GV).
    \]
    这说明集合 $X$ 到向量空间 $V$ 的映射等价于 $X$ 所生成的向量空间到 $V$ 的线性映射.
\end{example}
\begin{example}[对偶-反对偶伴随]
    回忆到在例~\ref{例:函子}中定义的对偶函子和反对偶函子, 记 $DV = V^{\vee}$, 我们有自然的同构\cite[命题 8.1.5]{李文威线代}
    \[\begin{tikzcd}
	{\Hom(W,V^{\vee})} & {\op{Bil}(V,W;F)} & {\Hom(V,W^{\vee})} \\
	{\left(w \mapsto B(-,w)\right)} & B & {\left(v \mapsto B(v,-)\right)} \\
	\varphi & {[B(v,w) \coloneqq \left<\varphi(w),v\right>]} \\
	& {[B(v,w) \coloneqq \left<\psi(v),w\right>]} & \psi
	\arrow["\sim", from=1-1, to=1-2]
	\arrow["\sim"', from=1-3, to=1-2]
	\arrow[maps to, from=2-2, to=2-1]
	\arrow[maps to, from=2-2, to=2-3]
	\arrow[maps to, from=3-1, to=3-2]
	\arrow[maps to, from=4-3, to=4-2]
    \end{tikzcd}\]
    其中 $\left<-,-\right>\colon V^{\vee} \times v\to F,(\lambda, v) \mapsto \lambda(v)$ 为典范配对.\\
    给出伴随 $D^{\opposite} \dashv D$.
\end{example}
\begin{definition}[单位和余单位]
    设 $(F,G,\varphi)$ 为伴随对, 定义态射
    \[
    \eta = (\eta_x)_{x\in \Obj(\cal{C})} \colon \identity_{\cal{C}} \Rightarrow GF
    \]
    为
    \begin{align*}
        \Hom_{\cal{D}}(Fx,Fx) &\xrightarrow{\varphi}\Hom_{\cal{C}}(x,GFx),\\
        \identity_{Fx} &\mapsto \eta_x
    \end{align*}
    翻转箭头可定义 $\varepsilon = (\varepsilon_x)_{x} \colon FG \to \identity_{\cal{D}}$. 称 $\eta$ 为 $(F,G,\varphi)$ 的\textbf{单位}, 而 $\varepsilon$ 为 $(F,G,\varphi)$ 的\textbf{余单位}.
\end{definition}
至于验证 $\eta$ 和 $\varepsilon$ 为自然变换留给读者作为习题.
\begin{lemma}[三角等式]
    对于伴随对 $(F,G,\varphi)$, 我们有自然变换之间的等式, 为方便起见, 将其写为以下 2-胞腔的形式
    \[\begin{tikzcd}
	C && C \\
	& D && D
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\identity_{C}}", from=1-1, to=1-3]
	\arrow["F"', from=1-1, to=2-2]
	\arrow["F", from=1-3, to=2-4]
	\arrow["G"{description}, from=2-2, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\identity_D}"', from=2-2, to=2-4]
	\arrow["\eta"', shorten <=3pt, Rightarrow, from=0, to=2-2]
	\arrow["\varepsilon", shorten >=3pt, Rightarrow, from=1-3, to=1]
\end{tikzcd}= \identity_F,\begin{tikzcd}
	& C && C \\
	D && D
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\identity_C}", from=1-2, to=1-4]
	\arrow["F"{description}, from=1-2, to=2-3]
	\arrow["G", from=2-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\identity_D}"', from=2-1, to=2-3]
	\arrow["G"', from=2-3, to=1-4]
	\arrow["\varepsilon"', shorten >=3pt, Rightarrow, from=1-2, to=1]
	\arrow["\eta", shorten <=3pt, Rightarrow, from=0, to=2-3]
\end{tikzcd}=\identity_G\]
\end{lemma}
\begin{proof}
    留作习题.
\end{proof}
\begin{proposition}
    给定函子
    \begin{tikzcd}
	{\mathcal{C}} & {\mathcal{D}}
	\arrow["F", curve={height=-12pt}, from=1-1, to=1-2]
	\arrow["G", curve={height=-12pt}, from=1-2, to=1-1]
    \end{tikzcd},
    以下的映射互为逆
    \[\begin{tikzcd}
	{\left\{\varphi \colon (F,G,\varphi) \text{为伴随对}\right\}} & {\{(\eta,\varepsilon)\text{满足三角等式}\}} \\
	\varphi & {(\eta_X \coloneqq \varphi(\identity_{FX}), \varepsilon_Y \coloneqq \varphi^{-1}(\identity_{GY}))} \\
	{\varphi(f) \coloneqq Gf \circ \eta_X} & {(\eta,\varepsilon)}
	\arrow[shift left, from=1-1, to=1-2]
	\arrow[shift left, from=1-2, to=1-1]
	\arrow[maps to, from=2-1, to=2-2]
	\arrow[maps to, from=3-2, to=3-1]
    \end{tikzcd}\]
\end{proposition}
\begin{exercise}
    请读者验证, 伴随函子的复合也是伴随函子, 即若 
    \begin{tikzcd}
	{\mathcal{C}_1} & {\mathcal{C}_2} & {\mathcal{C}_3}
	\arrow["F", curve={height=-12pt}, from=1-1, to=1-2]
	\arrow["G", curve={height=-12pt}, from=1-2, to=1-1]
	\arrow["{F'}", curve={height=-12pt}, from=1-2, to=1-3]
	\arrow["{G'}", curve={height=-12pt}, from=1-3, to=1-2]
    \end{tikzcd}
    中 $F\dashv G$, $F'\dashv G'$ 则 $F'F \dashv G'G$.
\end{exercise}
\begin{theorem}[伴随等价]
    考虑互逆的函子 
    \begin{tikzcd}
	{\mathcal{C}} & {\mathcal{D}}
	\arrow["F", curve={height=-12pt}, from=1-1, to=1-2]
	\arrow["G", curve={height=-12pt}, from=1-2, to=1-1]
    \end{tikzcd}
    , 并给定同构 $\eta \colon \identity_{\cal{D}} \xRightarrow{\sim} GF$ 以及 $\varepsilon \colon FG \xRightarrow{\sim}\identity_{\cal{C}}$, 则存在唯一的 $\varepsilon' \colon FG \xRightarrow{\sim}\identity_{\cal{C}}$ 使得 $(F,G,\eta, \varepsilon')$ 以及 $(G,F,(\varepsilon')^{-1},\eta^{-1})$ 皆为伴随对.
\end{theorem}
\begin{proof}
    \cite[定理 2.6.12]{李文威卷一}
\end{proof}
\begin{example}[代数-几何对偶]
    回忆例~\ref{例:范畴等价} 中, 我们曾提过范畴等价 $(\cate{AffSch})^{\opposite}\simeq \cate{CRing}$, 根据前文可知这自然诱导出伴随 $\Spec \dashv \OO_X$ 以及 $\OO_X \dashv \Spec$, 这一对偶事实上可以推广到更一般的情况.
\end{example}
\begin{example}
    根据我们推导极限的过程可以知道, 余极限是常值函子的左伴随而极限是常值函子的右伴随
    \[\begin{tikzcd}
	{\mathcal{C}^I} && {\mathcal{C}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "\indlim", shift left=4, from=1-1, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\prolim"', shift right=4, from=1-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\op{const}}"{description}, from=1-3, to=1-1]
	\arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=2]
	\arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=2, to=1]
    \end{tikzcd}\]
\end{example}
\subsubsection{伴随函子定理}
现在,来探讨一个函子何时具有左右伴随, 我们只讨论最基础的广义伴随函子定理, 特殊伴随函子定理以及在可表现范畴上的伴随函子定理暂且不表.
\begin{definition}
    令 $\cal{C}$, $\cal{D}$ 为范畴, 若函子 $F \colon \mathcal{C}\to \mathcal{D}$ 保所有的 $\prolim$, 则称其为\textbf{连续}的.\\
    若函子 $F \colon \mathcal{C} \to \mathcal{D}$ 保所有的 $\indlim$, 则称其为\textbf{余连续}的.
\end{definition}
\begin{proposition}
    右伴随函子都是连续的, 左伴随函子都是余连续的.
\end{proposition}
\begin{proof}
    不过简单的泛性质练习.
\end{proof}
现在, 我们思考这个命题反过来是否成立. 答案是成立, 但是需要有特定的条件.\\
首先, 我们翻译 $G \colon \mathcal{D} \to \mathcal{C}$ 有左伴随的条件.
\begin{proposition}
    $G \colon \mathcal{D} \to \mathcal{C}$ 有左伴随当且仅当对于任意 $c \in \Obj(\cal{C})$, $G_{c/}$ 都有始对象.
\end{proposition}
\begin{proof}
    首先, 对于任意 $c \in \mathcal{C}$, 考虑 $G_{c/}$, 其元素形如 $c \xrightarrow{\beta} Gd$, 其中 $d \in \mathcal{D}$, 而态射为使得以下图表交换的 $Gd \to Gd'$
    \[\begin{tikzcd}
	& c \\
	Gd && {Gd'}
	\arrow[from=1-2, to=2-1]
	\arrow[from=1-2, to=2-3]
	\arrow[from=2-1, to=2-3]
    \end{tikzcd}\]
    由此可见, $(d_0,\beta_0)$ 为始对象当且仅当有双射
    \begin{align*}
        \Hom_{\cal{D}}(d_0,d) &\xrightarrow{1:1} \Hom_{\cal{C}}(c,Gd)\\
        \alpha &\mapsto \beta \coloneqq (G\alpha) \beta_0
    \end{align*}
    若 $G$ 有左伴随, 则取 $d_0 = Fc$ 验证即可, 不难发现 $Gd_0 = GFc$, 因此 $\beta_0 = \eta_c$ 为单位, 由单位给出的双射可知 $d_0$ 确实为始对象.\\
    若对于任意 $c\in \Obj(\mathcal{C})$, 都有 $G_{c/}$ 存在始对象, 则令 $F(c) = d_0$ 给出函子, 由前文可知自然给出双射, 因此得到伴随.
\end{proof}
因此, 问题转变为研究 $G_{c/}$ 何时有始对象, 我们引入弱始系来说明这一点.
\begin{definition}[弱始对象]
    设 $\mathcal{E}$ 为范畴. 称 $\Obj(\mathcal{E})$ 的非空小子集为\textbf{弱始系}, 如果对每个 $e'\in \Obj(\mathcal{E})$ 都存在 $e \in \Gamma$ 使得 $\Hom_{\mathcal{E}}(e,e') \neq\varnothing$, 若 $e \in \mathcal{E}$ 且 $\{e\}$ 为弱始系, 则称 $e$ 为\textbf{弱始对象}.
\end{definition}
不难发现, 对于弱始系 $\Gamma$, 有 $\prod_{e\in \Gamma} e$ 为弱始对象, 因此, 我们要求完备性.\\
对于 $G_{c/}$, 若对于每个 $f \colon c \to Gd$ 都存在 $i \in I$ 以及态射 $\alpha \colon d_i \to d$ 使得 $f$ 可以分解为 $c \xrightarrow{f_i}Gd_i \xrightarrow{G\alpha}Gd$, 则 $\{(d_i,(c\to Gd_i))\}$ 给出弱始系.
\begin{lemma}
    设范畴 $\mathcal{E}$ 完备. 若其有弱始系 $\Gamma$, 则其有始对象.
\end{lemma}
\begin{proof}
    由完备性可知弱始对象的存在性, 接下来取 $\mathcal{E}$ 的全子范畴 $I$, $\Obj(I) = \{e\}$. 完备性确保 $I \hookrightarrow \mathcal{E}$ 中 $\prolim$ 的存在性, 记其为 $x$, 根据极限定义, 可以给出其泛性质, 记典范态射 $i \colon x \to e$, 有
    \begin{align*}
        i_* \colon \Hom_{\mathcal{E}}(t,x) &\xrightarrow{1:1} \{\phi \in \Hom(t,e) \colon \forall \theta , \theta' \in \Hom_{\mathcal{E}}(e,e), \theta \phi = \theta'\phi\}\\
        \psi &\mapsto i\psi
    \end{align*}
    显然有 $i$ 为单态射.\\
    接下来说明 $x$ 是始对象, 对于任意 $g \colon x \to y$, 由于 $e$ 为弱始对象, 因此 $\Hom(e,y) \neq \varnothing$, 因此考虑 $f \colon x \xrightarrow{i} e\to y$, 此处 $e \to y$ 是任意选取的, 我们来说明 $f = g$, 考虑 $\ker(f,g)$, 它带有典范态射 $j \colon \ker(f,g) \hookrightarrow X$, 由于 $e$ 为弱始对象, 因此存在 $k \colon e \to \ker(f,g)$, 由此给出 $ijk \colon e \to e$, 在 $x$ 的泛性质中取 $\psi = \identity_x$, 由此得到 $i_*(\identity_x) = i$, 即 $i \in \{\phi \in \Hom(t,e) \colon \forall \theta , \theta' \in \Hom_{\mathcal{E}}(e,e), \theta \phi = \theta'\phi\}$, 而 $ijk, \identity_e \in \Hom_{\mathcal{E}}(e,e)$, 因此 $(ijk)i = \identity_e i = i = i(\identity_x)$ 因此得到 $i(jki) = i(\identity_x)$, 由 $i$ 的单性可知 $jki = \identity_x$. 从而 $f = fjki = gjki = g$.
\end{proof}
因此我们还需要说明 $G_{c/}$ 是完备的.
\begin{proposition}
    范畴 $\mathcal{D}$ 完备, $G \colon \mathcal{D} \to \mathcal{C}$ 保小 $\prolim$. 取 $c \in \Obj(\mathcal{C})$.
    \begin{itemize}
        \item 则函子 $\prod_{c/}$ 保守($\prod_{c/} f$ 为同构当且仅当 $f$ 为同构), 且生所有小 $\prolim$.
        \item 范畴 $G_{c/}$ 完备.
        \item $\prod_{c/}$ 映单态射为单态射.
    \end{itemize}
\end{proposition}
\begin{proof}
    \cite[命题 1.11.4]{李文威卷二}.
\end{proof}
现在, 可以给出伴随函子定理.
\begin{theorem}[P.Freyd 伴随函子定理]
    考虑 $\mathcal{C}$, $\mathcal{D}$.
    \begin{enumerate}
        \item 设 $\mathcal{D}$ 为完备范畴, 函子 $G \colon \mathcal{D} \to \mathcal{C}$ 是连续的, 则 $G$ 有左伴随当且仅当以下解集条件成立: 对于每个 $c \in \mathcal{C}$, 存在一族态射 $\{f_i \colon c \to Gd_i\}$ 使得每个 $f \colon c \to Gd$ 都存在 $i \in I$ 以及态射 $\alpha \colon d_i \to d$ 使得 $f$ 可以分解为 $c \xrightarrow{f_i}Gd_i \xrightarrow{G\alpha}Gd$.
        \item 读者自己推对偶情况.
    \end{enumerate}
\end{theorem}
事实上, 我们可以将其推广到一般的可表现范畴上, 不过我们不讲可表现范畴, 因此读者可以自行搜索, 注意到可表现范畴不是对偶概念($\kappa$-可达且余完备, 或者说可以由一些小对象由余极限生成), 因此其上伴随函子定理不对偶.
\subsubsection{Kan 延拓的进一步讨论}
一种构造左右伴随的常见办法就是 Kan 延拓, 或者说 Kan 延拓在函子范畴上的展现.
\begin{proposition}\label{Pro:Kan延拓定义}
    给定范畴$\mathcal{C},\mathcal{D},\mathcal{E}$和函子$K \colon \mathcal{C} \to \mathcal{D}$, $F \colon\mathcal{C} \to \mathcal{E}$.考虑拉回函子$K^* \mathcal{E}^{\mathcal{D}} \to \mathcal{E}^{\mathcal{C}}$.
    \begin{enumerate}
        \item 精确到$\mathcal{E}^{\mathcal{D}}$中唯一的同构,左Kan延拓$(\Lan_KF,\eta)$若存在则唯一;右Kan延拓亦是如此.
        \item 若沿$K$的左Kan延拓(或右Kan延拓)对所有$F$皆存在,则得到$K^*$的左伴随函子$\Lan_K \colon \mathcal{E}^{\mathcal{D}}\to \mathcal{E} \to \mathcal{C}$(或右伴随函子$\Ran_K \colon \mathcal{E}^{\mathcal{D}}\to \mathcal{E} \to \mathcal{C}$),定义\ref{Def:Kan延拓}中$\eta$(或$\varepsilon$)所构成的态射族正是伴随对中单位(余单位)态射.
    \end{enumerate}
\end{proposition}
\begin{proof}
    显然.
\end{proof}
\begin{remark}
    有些教材直接使用这个命题作为Kan延拓定义.
\end{remark}
发现Kan延拓其实是在寻求一个$G \colon \mathcal{D} \to \mathcal{E}$使得$F$与$GK$之间有一个最佳的逼近.那么如何对于$d \in \Obj(\mathcal{D})$定义$Gd$就成了问题.唯一的线索是当$d = Kc$时, $Gd$在同构意义下应当被取为$Fc$.因此可以使用所有的$Fc$的$\indlim$(或$\prolim$)来逼近$Gd$,极限取遍所有的$c \in \Obj(\mathcal{C})$和态射$Kc \to d$(或$d \to Kc)$.为了记号上的方便,对于俯仰范畴进行一个扩充,得到以下定义.\footnote{其实是\parencite[定义1.6.2]{李文威卷二}}
\begin{definition}
    若$F \colon \mathcal{C} \to \mathcal{D}$为函子,且$d \in \mathcal{D}$为一个对象.定义$F_{/d}$为拉回
    \[\begin{tikzcd}
	{F_{/d}} & {\mathcal{D}_{/d}} \\
	{\mathcal{C}} & {\mathcal{D}}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow["F", from=2-1, to=2-2]
    \end{tikzcd}\]
    即$F_{/d}$中对象为$(c\in \mathcal{C},\alpha \colon F(c) \to d)$态射为使得以下图表交换的$\beta$
    \[\begin{tikzcd}
	{F(c)} && {F(c')} \\
	& d
	\arrow["{F(\beta)}", from=1-1, to=1-3]
	\arrow["\alpha"', from=1-1, to=2-2]
	\arrow["{\alpha'}", from=1-3, to=2-2]
    \end{tikzcd}\]
    当$F$为子范畴的嵌入函子时,简写为$\mathcal{C}_{/d}$,类似定义$F_{d/}$和$\mathcal{C}_{d/}$.\\
    可以发现$F_{/d}$(或$F_{d/}$)带有典范的投影函子$\prod_{/d}\colon F_{/d} \to \mathcal{C}$将$(c,\alpha\colon F(c) \to d)$(或$(c,\alpha\colon d \to F(c))$)映为$c$,态射$\beta$映为$\beta$.
\end{definition}
今后的重点在于合成函子$F \prod_{/d}\colon K_{/d} \to \mathcal{E}$和$F\prod_{d/}\colon K_{d/} \to \mathcal{E}$,它们分别映对象$(c,Kc \to d)$和$(c,d \to Kc)$为$Fc$.在极限存在的情况下,可以做几点观察:
\begin{itemize}
    \item 任何$d \to d'$诱导典范态射$\indlim F\prod_{/d} \to \indlim F \prod_{/d'}$;其刻画为使得图表
    \[\begin{tikzcd}
	Fc & Fc \\
	{\indlim F\prod_{/d}} & {\indlim F\prod_{/d'}}
	\arrow[equal, from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
    对每个$(c,Kc \to d)\in \Obj(K_{/d})$交换(它诱导$(c,Kc \to d') \in \Obj(K_{/d'})$),纵向箭头即为$\indlim$自带的典范态射.
    \item 考虑$(c,Kc \xrightarrow{\identity} Kc)\in \Obj(K_{/Kc})$得到典范态射$\eta_c \colon Fc \to \indlim F\prod_{/Kc}$.
    \item 任何$c \to c'$皆诱导典范态射$\indlim F\prod_{/Kc}   \to \indlim F\prod_{/Kc'}$使得
    \[\begin{tikzcd}
	Fc & {Fc'} \\
	{\indlim F\prod_{/Kc}} & {\indlim F\prod_{/Kc'}}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
    交换.鉴于对偶性,$\prolim F\prod_{d/}$也具备相应性质,如典范态射$\varepsilon_c \colon \prolim F \prod_{Kc/} \to Fc$等等.次一定理的陈述基于这些函子性.
\end{itemize}
\begin{theorem}\label{The:Kan延拓逐点构造}
考虑函子$K \colon\mathcal{C} \to \mathcal{D}$和$F \colon \mathcal{C}  \to \mathcal{E}$.
    \begin{enumerate}
        \item 若对于每个$d\in \Obj(\mathcal{D})$,极限$\indlim(F\prod_{/d})$在$\mathcal{E}$中存在,则$(\Lan_K F)(d) \coloneqq \indlim (F\prod_{/d})$连同前文对应的交换图表给出的函子性确定了左Kan延拓$\Lan_K F \colon \mathcal{D} \to \mathcal{E}$,相应$\eta \colon F \to (\Lan_K F)K$来自于前文讨论的$(\eta_c)_{c\in \Obj(\mathcal{C})}$.
        \item 若对于每个$d\in \Obj(\mathcal{D})$,极限$\prolim(F\prod_{d/})$在$\mathcal{E}$中存在,则$(\Ran_K F)(d) \coloneqq \prolim (F\prod_{d/})$连同函子性确定了右Kan延拓$\Ran_K F \colon \mathcal{D} \to \mathcal{E}$,相应$\varepsilon \colon (\Ran_KF )K  \to F$来自于前文讨论的$(\varepsilon_c)_{c\in \Obj(\mathcal{C})}$.
        \item 若$K\colon \mathcal{C} \to \mathcal{D}$全忠实,则$\eta$与$\varepsilon$同构.
    \end{enumerate}
\end{theorem}
\begin{proof}
    \begin{enumerate}
        \item[1.与2.]由于1.与2.是对偶的,因此只需要证明1.的情况,这无非是依照泛性质验证Kan延拓定义,对于$L\colon \mathcal{D} \to \mathcal{E}$以及$\xi \colon F \to LK$利用余极限的泛性质得知存在$\chi_d \colon (\Lan_K F )(d) \to Ld$,具体刻画为图表
        \[\begin{tikzcd}
	Fc & {(\Lan_L F)(d)} \\
	LKc & Ld
	\arrow[from=1-1, to=1-2]
	\arrow["{\xi_c}"', from=1-1, to=2-1]
	\arrow["{\chi_d}", from=1-2, to=2-2]
	\arrow["{L(Kc \to d)}"', from=2-1, to=2-2]
        \end{tikzcd}\]
        其自然给出$\chi \colon \Lan_K F \to L$.根据$\chi_d$定义可以得知$\xi_c = \chi_{Kc}\eta_c \colon Fc \to LKc$.这图表中取$d = Kc$即可. $\chi$的唯一性也是容易的.因此得知$\Lan_K F$确实为左Kan延拓.
        \item[3.] 取定$c\in \Obj(\mathcal{C})$.由$K$的全忠实性可知$K_{/Kc}$有终对象$(c, Kc \xrightarrow{\identity} Kc)$,而$\eta \colon Fc \to \indlim F \prod_{/Kc}$来自于此终对象,故为同构.
    \end{enumerate}
\end{proof}
\begin{remark}\label{Rk:拉回函子左右伴随}
    若$\mathcal{C}$为小范畴,则$K_{/d}$和$K_{d/}$对每个$d \in \Obj(\mathcal{D})$都是小范畴.因此当$\mathcal{E}$余完备(或完备)时,命题\ref{Pro:Kan延拓定义}与定理\ref{The:Kan延拓逐点构造}可以说明拉回函子$K^*$必有左伴随(或右伴随).
\end{remark}
\begin{remark}
    由此不难得知, 对于拓扑空间上的连续映射 $X \to Y$, 令 $\mathcal{F}\in (\open(X))^{\vee}$, $\mathcal{G}\in (\open(Y))^{\vee}$, 则 
    \[
    \Hom_{\open(X)^{\vee}}(f^{-1}(\mathcal{G}),\mathcal{F}) \simeq \Hom_{\open(Y)^{\vee}}(\mathcal{G},f_*\mathcal{F}).
    \]
\end{remark}
\subsubsection{2-范畴看伴随}
事实上, 2-范畴才是一个合理的看待伴随的角度, 虽然读者目前可能还没有接触过何谓 2-范畴, 不妨将其视为带有一些额外的 2-箭头的范畴.
\begin{definition}[伴随]
    2-范畴中的一组伴随
\begin{tikzcd}
	D & C
	\arrow[""{name=0, anchor=center, inner sep=0}, "g"', shift right, curve={height=8pt}, from=1-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "f"', shift right, curve={height=8pt}, from=1-2, to=1-1]
	\arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=1, to=0]
\end{tikzcd}
    是如下信息:
    \begin{itemize}
        \item 一对对象 $C, D$,
        \item 一对 1-态射 $f: C \to D$(称为左伴随), $g : D \to C$(称为右伴随),
        \item 一对 2-态射 $\eta : \identity_C \Rightarrow gf$(称为单位), $\varepsilon: fg \Rightarrow \identity_D$(称为余单位).
    \end{itemize}
    满足以下条件
    \[\begin{tikzcd}
	C && C \\
	& D && D
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\identity_{C}}", from=1-1, to=1-3]
	\arrow["f"', from=1-1, to=2-2]
	\arrow["f", from=1-3, to=2-4]
	\arrow["g"{description}, from=2-2, to=1-3]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\identity_D}"', from=2-2, to=2-4]
	\arrow["\eta"', shorten <=3pt, Rightarrow, from=0, to=2-2]
	\arrow["\varepsilon", shorten >=3pt, Rightarrow, from=1-3, to=1]
\end{tikzcd}= \identity_f,\begin{tikzcd}
	& C && C \\
	D && D
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\identity_C}", from=1-2, to=1-4]
	\arrow["f"{description}, from=1-2, to=2-3]
	\arrow["g", from=2-1, to=1-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\identity_D}"', from=2-1, to=2-3]
	\arrow["g"', from=2-3, to=1-4]
	\arrow["\varepsilon"', shorten >=3pt, Rightarrow, from=1-2, to=1]
	\arrow["\eta", shorten <=3pt, Rightarrow, from=0, to=2-3]
\end{tikzcd}=\identity_g\]
此时也称二元组 $(\eta, \varepsilon)$ 使得 $f$ 作为 $g$ 的左伴随, 也称其使得 $g$ 作为 $f$ 的右伴随.
\end{definition}
\begin{example}
    令 $F \colon \mathcal{C} \to \mathcal{D}$ 以及 $G \colon \mathcal{D} \to \mathcal{C}$ 为 $1$-范畴之间的函子, 将其视为严格 $2$-范畴 $\cate{Cat}$ 中的 $1$-态射, 则 $F$ 与 $G$ 的伴随即为范畴论意义下的伴随函子.
\end{example}
(后文有缘再更新)
\subsection{幺半范畴}
\cite[第三章 幺半范畴]{李文威卷一}已经充分描述了何谓幺半范畴, 不必再画蛇添足.
\subsection{群对象}
在范畴论中, \textbf{群对象}是群的概念的推广.
我们熟知, 群是带有乘法操作的集合, 使得乘法有单位元、逆元.
我们可以将其推广为任何范畴 $\mathcal{C}$ 的对象,
带有乘法操作, 并且乘法有单位元、逆元.
这样的对象就是 $\mathcal{C}$ 中的群对象.

设 $\mathcal{C}$ 是一个范畴, 具有有限乘积.
特别地, $\mathcal{C}$ 有终对象 $*$.

\begin{definition}
    $\mathcal{C}$ 中的\textbf{群对象}是四元组
    $(G,m,e,i)$, 其中

\begin{itemize}
    \item $G \in \mathcal{C}$ 是一个对象.
    \item $m \colon G \times G \to G$ 是态射, 称为\textbf{乘法}.
    \item $e \colon * \to G$ 是态射, 称为群对象的\textbf{单位元}.
    \item $i \colon G \to G$ 是态射, 称为取\textbf{逆元}.
\end{itemize}
    使得以下图表交换:
\begin{itemize}
    \item (\textbf{结合律})
    \[\begin{tikzcd}
	{G\times G \times G} & {G\times G} \\
	{G\times G} & G
	\arrow["{\identity_G\times m}", from=1-1, to=1-2]
	\arrow["{m\times\identity_G}"', from=1-1, to=2-1]
	\arrow["m", from=1-2, to=2-2]
	\arrow["m"', from=2-1, to=2-2]
    \end{tikzcd}\]
    \item (\textbf{单位律})
    \[\begin{tikzcd}
	& G \\
	{G\times G} & G & {G\times G}
	\arrow["{(\identity_G , e)}"', from=1-2, to=2-1]
	\arrow["{\identity_G}"{description}, from=1-2, to=2-2]
	\arrow["{(e,\identity_G)}", from=1-2, to=2-3]
	\arrow["m"', from=2-1, to=2-2]
	\arrow["m", from=2-3, to=2-2]
    \end{tikzcd}\]
    \item (\textbf{逆元})
    \[\begin{tikzcd}
	& G \\
	{G\times G} & G & {G\times G}
	\arrow["{(\identity_G , i)}"', from=1-2, to=2-1]
	\arrow["e"{description}, from=1-2, to=2-2]
	\arrow["{(i,\identity_G)}", from=1-2, to=2-3]
	\arrow["m"', from=2-1, to=2-2]
	\arrow["m", from=2-3, to=2-2]
    \end{tikzcd}\]
    其中 $e: G \to G$ 是复合
    \[
        G \longrightarrow
        {*} \overset{e}{\longrightarrow}
        G .
    \]

    若 $G$ 还满足以下条件:
    \item (\textbf{交换律})
    \[\begin{tikzcd}
	{G\times G} && {G\times G} \\
	& G
	\arrow["\delta", from=1-1, to=1-3]
	\arrow["m"', from=1-1, to=2-2]
	\arrow["m", from=1-3, to=2-2]
    \end{tikzcd}\]
    其中映射 $\delta$ 为交换两个分量,
    则称 $G$ 为\textbf{交换群对象}或 \textbf{Abel 群对象}.
\end{itemize}

\end{definition}

有自然的方式定义群对象间的态射.

\begin{definition}
    设 $G_k = (G_k, m_k, e_k, i_k) \ (k=1,2)$ 为群对象.
    一个同态 $f: G_1 \to G_2$ 是一个态射 $f: G_1 \to G_2$, 
    使得它与群乘法相容, 即有交换图表
    \[\begin{tikzcd}
	{G_1\times G_1} & {G_2\times G_2} \\
	{G_1} & {G_2}
	\arrow["{f\times f}", from=1-1, to=1-2]
	\arrow["{m_1}"', from=1-1, to=2-1]
	\arrow["{m_2}", from=1-2, to=2-2]
	\arrow["f"', from=2-1, to=2-2]
    \end{tikzcd}\]
\end{definition}

容易验证, 群同态的复合还是同态. 从而我们得到一个范畴.

\begin{definition}
    设 $\mathcal{C}$ 是一个有有限乘积的范畴.
    $\mathcal{C}$ 的群对象范畴是如下范畴,
    它的对象是 $\mathcal{C}$ 的群对象,
    态射是群对象的同态.
    $\mathcal{C}$ 的交换群对象范畴是群对象范畴的由交换群对象构成的全子范畴.
\end{definition}

\section{题外话 : 高阶范畴论一瞥(草创阶段)}
\begin{remark}
    受时间限制, 本节肯定是讲不到的, 因此留作扩展阅读资料. 目前写的还挺烂, 等待修改, 本节只对于高阶范畴论进行一些概览, 真正的内容见 $\infty$-范畴笔记.
\end{remark}
从代数拓扑的角度看, 研究高阶范畴结构的动机为:
\begin{center}
    To capture all homotopy-invariant information, it is not enough to record homotopies between maps, rather, we need to record all the higher homotopies.
\end{center}
本节我们来讲述 $\infty$-范畴的两种模型, 也就是两种达到 $\infty$-范畴的方式\footnote{当然, 所谓 $\infty$-范畴都系指 $(\infty,1)$-范畴, 即对于 $k >1$ 的 $k$-态射都可逆的范畴.}.\\
在此之前, 我们希望读者知晓在高阶范畴论中我们有以下原理:
\begin{center}
    Whenever we would like to express that two things are equal, we should always remember how the two things are equal by specifying an isomorphism between them.\\
    \hfill ---\cite[]{CisinskiFormalization}
\end{center}
    
很早之前我们就已然知晓, 在 $1$-态射之间还具有 $2$-态射, 在 $2$-态射之间还具有 $3$-态射, etc. 现在, 我们试着去在合理的框架下去研究它们.\\
首先我们试着搭建高阶态射, 首先我们当然还是得停留在 1-范畴上, 我们试着在 $\Hom(x,y)$ 中添入高阶态射, 最值得参考的例子就是 2-范畴. 在 2-范畴中, 我们通过``充实''于(当然, 比充实范畴更加宽松, 这是因为在我们考虑 $\Hom$ 从集合变为某个幺半范畴 $\mathcal{V}$ 的对象. 在集合,或者视为离散范畴中, 我们讨论两个点之间的同构就只能是严格相等, 而换成更一般的结构时, 我们就需要换为更合适的同构) $\cate{Cat}$ 的方式得到了 $2$-范畴, 即 $\Hom(x,y)$ 由集合变成了范畴.\\
 因此, 我们得到参考, 我们可以构造某个``充实''于 $(\infty,0)$-范畴的范畴来得到 $(\infty,1)$-范畴, 因此问题转化为如何寻找 $(\infty,0)$-范畴.\\
要造出 $(\infty,0)$-范畴, 就先回忆 $(1,0)$-范畴, 即为群胚, 我们可以从拓扑空间中典范的取出群胚(例~\ref{基本群胚}), 这个时候, $\Hom(x,y)$ 为从点 $x$ 到 $y$ 的道路类, 此时我们商掉了道路之间的同伦等价\footnote{若读者已经阅读了第~\ref{抽象同伦论}~章, 可以知道此时我们将道路之间的同伦等价视为弱等价进行了局部化, 这样同伦等价的道路就变成了道路同伦类中的同一个元素.}, 我们也可以不商掉它们, 而是将其保留, 这样我们可以得到推广的基本群胚
 \begin{example}[基本群胚]\label{Exp:群胚}
    令 $E$ 为拓扑空间且 $0 \leq n \leq \infty$ .可以通过以下方式萃取出一个$n$-范畴 $\Pi_{\leq n} E$. 
    \begin{itemize}
        \item 对象:$E$中的点.
        \item 态射:若$x,y\in E$,则从$x$到$y$的态射为一条以$x$为起点, $y$为终点的道路$[0,1]\to E$.
        \item 2-态射:道路的同伦.
        \item 3-态射:同伦的同伦,
        \item $\cdots$
    \end{itemize}
    最终,若$n < \infty$则两个$n$-态射可视为一致的当且仅当它们互相同伦(即商掉$>n$的同伦关系).\\
    若$n = 0$则$\Pi_{\leq n}X = \Pi_0(E)$为$E$的连通分支构成的集合.若$n = 1$则得到$E$的基本群胚.因此$\Pi_{\leq n}E$称为$E$的基本$n$-群胚.由于每个$k$-态射均可逆,它被称为$n$-群胚(而不仅仅为$n$-范畴).
\end{example}
因此, 我们研究充实于拓扑空间的范畴即可体现出高阶态射(直至无穷), 但是这样无法保证复合的连续性, 我们需要选取一些能够使得复合连续的空间.我们知道在代数拓扑中, 复合连续可以作为指数律的推论, 因此我们使用充实于方便的空间范畴的范畴, 在本节中, 我们选取充实于 $\cate{CGwH}$ 的范畴, 称为拓扑范畴.
\begin{definition}[拓扑范畴]
    拓扑范畴是指充实于$\cate{CGWH}$(紧生成弱Hausdorff空间)的范畴,拓扑范畴所构成的范畴记为$\cate{Cat}_{\cate{top}}$.
\end{definition}
更精确地来说,一个拓扑范畴$\mathcal{C}$由以下资料组成:一族对象以及对于每对$X,Y\in \Obj(\mathcal{C})$都配备紧生成弱Hausdorff的拓扑空间$\iHom_{\mathcal{C}}(x,Y)$.并且这些映射空间配备由连续映射给出的结合律
\[
\iHom_{\mathcal{C}}(X_{n-1},X_n)\times \iHom_{\mathcal{C}}(X_{n-2},X_{n-1})\times \cdots \times \iHom_{\mathcal{C}}(X_0,X_1) \to \iHom_{\mathcal{C}}(X_0,X_n)
\]
这样的范畴就是 $\infty$-范畴的一个例子, 此时 1-态射体现为 $\iHom(X,Y)$ 中的点, 而 2-态射体现为 $\iHom(X,Y)$ 中的道路, etc.\\
此时, 我们将 $\infty$-范畴视为带有同伦结构的范畴, 事实上这就是正确的进路.
\begin{center}
    $\infty$-范畴理论 = 范畴论 + 同伦论.
\end{center}
我们将在第~\ref{抽象同伦论}~章中介绍如何研究范畴上的同伦, 或者说研究同伦理论, 这套理论称为抽象同伦论, 粗略来说, 我们在范畴上定义出一种叫做弱等价的宽子范畴(对象和原范畴一致), 这些弱等价是同伦等价(更确切来说, 是弱同伦等价)的推广, 但是为了具体研究它, 我们一般会增加额外信息使得它们更容易描述, 这些信息分为两类, 分别模拟好的单射以及好的满射, 称为余纤维化和纤维化, 带有这写额外信息的弱等价范畴称为模型范畴. 当我们想从外部来研究 $\infty$-范畴的同伦以及 $\infty$-范畴模型的等价性时, 我们就需要它.\\
遗憾的是, 拓扑范畴所构成的范畴上无法构建良好的模型结构\cite[Lecture 2, Exercise 3.6 以及 3.7]{陈麟}, 原因在于其信息太多. 应当使用一种组合工具对其信息进行萃取, 只保留我们关心的同伦信息, 这种组合工具即为单纯集.
\subsection{单纯集概览}
\begin{definition}[单形范畴]
    令$\Delta$为以下资料所构成的范畴:
    \begin{itemize}
        \item 对象:全序集$[n]=\{0<1<\cdots<n-1<n\}$.
        \item 态射:$[m]$到$[n]$的保序映射.
    \end{itemize}
    将$\Delta$称为单形范畴.
\end{definition}
\begin{remark}\label{Rk:单纯范畴分解}
    可以发现单纯范畴中任意态射$[l]\to [n]$均可唯一分解为保序满射和保序单射的合成
    \[[l]\twoheadrightarrow [m]\hookrightarrow [n], n\geq m \leq l,\]
    而如上的单射(或满射)又可以拆解为片段,使得每步恰好遗漏一个元素(或恰好合并两个元素);换言之,所有态射均可分解为
    \begin{itemize}
        \item 面态射, $\delta^i=\delta_n^i:[n-1]\hookrightarrow [n]$, $0\leq i \leq n$,仅仅遗漏$i\in[n]$.
        \item 退化态射, $\sigma^j = \sigma_n^j: [n+1] \twoheadrightarrow [n]$, $0\leq j \leq n$,取两次$j\in[n]$的保序满射.
    \end{itemize}
    直观一点的看,面态射可以视为为将一个面嵌入到单形中(或者说取出一个面),而退化态射可以被视为通过增加了一些恒等态射作为``面''来得到更高阶的单形,事实上可以将这些``面''去掉,并不会影响单形的信息,这种单形就叫做退化单形.
\end{remark}
而后,定义单形对象
\begin{definition}[单形对象]\label{Def:单形对象}
    给定范畴$\mathcal{C}$,
    \begin{itemize}
        \item 其中的单形对象意谓函子$\Delta^{\opposite} \to \mathcal{C}$,全体单形对象构成的范畴记为$\mathsf{s}\mathcal{C}:= \mathcal{C}^{\Delta^{\opposite}}$.
        \item 余单形对象意谓函子$\Delta \to \mathcal{C}$,全体余单形对象构成的范畴记为$\mathsf{cs}\mathcal{C}:= \mathcal{C}^{\Delta}$.
    \end{itemize}
\end{definition}
\begin{definition}[单纯集]
    当定义\ref{Def:单形对象}中$\mathcal{C}$被替换为集合范畴$\cate{Set}$时,得到的单形对象称为单纯集.全体单纯集构成的范畴记为$\cate{sSet}$.
\end{definition}
\begin{definition}[标准$n$-单形]
    对所有$n \in \Z_{\geq 0}$,记$\Hom_{\Delta}(-,[n]): \Delta^{\opposite}\to \cate{Set}$确定的单纯集为$\Delta^n$,称为标准$n$-单形.
\end{definition}
\begin{remark}
    因此$(\Delta^n)_m = \Hom_{\Delta}([m],[n])$是全体保序映射$[m]\to [n]$. $\phi: [m]\to [m']$诱导的$(\Delta^n)_{m'} \to (\Delta^n)_{m}$正是映射的拉回$\phi^* : f \mapsto f\phi$.此外,由Yoneda 引理(定理~\ref{引理:Yoneda})可以得知$\Hom_{\cate{sSet}}(\Delta^n,S) \simeq S_n$.
\end{remark}
根据 Yoneda 引理, 还可以给出以下推论
\begin{corollary}\label{Cor:单纯集逼近}
    对于任意一个单纯集$X$都有
    \[
    X \simeq \underset{([n],\sigma)\in\Delta_{/X} }{\indlim} \Delta^n.
    \]
\end{corollary}
\subsubsection{几何实现}
通过标准$n$-单形,我们可以勾连$\cate{sSet}$与$\cate{Top}$得到我们熟知的单形.记$\R^{n+1}$的有序基为$e_0,\cdots,e_n$.定义
\[\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,200); %set diagram left start at 0, and has height of 200
%Straight Lines [id:da08262452045611424] 
\draw    (429.72,126.91) -- (429.72,60.74) ;
\draw [shift={(429.72,58.74)}, rotate = 90] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da7995058606515195] 
\draw    (429.72,126.91) -- (496.43,126.91) ;
\draw [shift={(498.43,126.91)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da8936249968070875] 
\draw    (429.72,126.91) -- (399.12,156.17) ;
\draw [shift={(397.68,157.56)}, rotate = 316.27] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Polygon [id:ds9544209503649113] 
\draw  [fill={rgb, 255:red, 245; green, 166; blue, 35 }  ,fill opacity=0.3 ] (429.72,92.82) -- (413.7,142.23) -- (464.07,126.91) -- (429.72,92.82) -- cycle ;
% Text Node
\draw (14,77.96) node [anchor=north west][inner sep=0.75pt]  [font=\large]  {$| \Delta^n | :=\left\{( x_{0} ,\cdots ,x_{n}) \in (\mathbb{R}_{\geq 0})^{n+1} :\sum _{i=0}^{n} x_{i} =1\right\}$};
% Text Node
\draw (426.35,39.4) node [anchor=north west][inner sep=0.75pt]    {$e_{1}$};
% Text Node
\draw (383.94,136.01) node [anchor=north west][inner sep=0.75pt]    {$e_{0}$};
% Text Node
\draw (484.17,102.09) node [anchor=north west][inner sep=0.75pt]    {$e_{2}$};
% Text Node
\draw (444.58,139.43) node [anchor=north west][inner sep=0.75pt]   [align=left] {(n=2时)};
\end{tikzpicture}\]
称其为拓扑 $n$-单形, 它的顶点通过$i\leftrightarrow e_i$由$0,\cdots,n$标号,其内部带有标准定向,使$e_1-e_0$, $\cdots$ , $e_n-e_{n-1}$处处给出正向有序基.\\

任意保序映射$f : [m] \to [n]$都诱导映射
\begin{align*}
    |f|:|\Delta^m| &\longrightarrow |\Delta^n|\\
    \sum_{i=0}^m y_ie_i &\longmapsto \sum_{i=0}^n y_i e_{f(i)}.
\end{align*}
当$f$非满时, $|f|$的像落在边界.可用嵌入$|\delta^i| :|\Delta^{n-1}| \to |\Delta^n|$比较$|\Delta^{n-1}|$内部的定向和$|\Delta^n|$在其边界上诱导的定向:行列式的常规练习可知两者相差$(-1)^i$.因此得到函子
\[
|-| : \Delta \to \cate{Top}\quad \left\{\begin{array}{c}
     \text{对象}\quad [n]\mapsto |\Delta^n|  \\
     \text{态射}\qquad f \mapsto |f|
\end{array} \right.
\]
考虑图表
\[\begin{tikzcd}
	\Delta \\
	{\cate{sSet}} & {\cate{Top}}
	\arrow["{h_{\Delta}(-):[n] \mapsto \Delta^n}"', from=1-1, to=2-1]
	\arrow["{|-|\colon[n] \mapsto |\Delta^n|}", from=1-1, to=2-2]
\end{tikzcd}\]
现在我们希望将其延拓为$\cate{sSet} \to \cate{Top}$的函子.
由推论~\ref{Cor:单纯集逼近}可知对于任意单纯集 $X$ 都有 $X = \underset{(n,\sigma)}{\indlim} \Delta^n$. 而且 $\cate{Top}$ 又是余完备的,因此可以给出:
\begin{definition}[几何实现函子]
    函子$|-|:\cate{sSet} \to \cate{Top}$定义如下:设$X$为单纯集,则
    \[
    |X| := \underset{n,\sigma}{\indlim}|\Delta^n|,
    \]
    其中$n\in \Z_{\geq 0}$,而$\sigma\in X_n$为$n$-单形,这些资料$([n],\sigma)$形成范畴,使得从$([n],\sigma)$到$([m],\delta)$的态射无非是让
    \[\begin{tikzcd}
	{\Delta^n} && {\Delta^m} \\
	& X
	\arrow["f", from=1-1, to=1-3]
	\arrow["\sigma"', from=1-1, to=2-2]
	\arrow["\delta", from=1-3, to=2-2]
    \end{tikzcd}\]
    交换的$f \in \Hom_{\Delta}([n],[m])$,或者等价地说,要求$f^*:X_m \to X_n$满足$f^*(\delta) = \sigma$.
\end{definition}
可以定义出几何实现的右伴随.
\begin{definition}[奇异集函子]
    对于任意拓扑空间$E$,定义单纯形集$\Sing(E)$使得
    \[
    \Sing(E)_n \coloneqq \Hom_{\cate{Top}}(|\Delta^n|,E), n\in \Z_{\geq 0},
    \]
    而$d_i: \Sing(E)_n \to \Sing(E)_{n-1}$(或$s_j \Sing(E)_n \to \Sing(E)_{n+1}$)是沿着$|\delta^i| :|\Delta^{n-1}| \to |\Delta^n|$(或$|s^j| : |\Delta^{n+1}|\to |\Delta^n|$)的拉回,称之为$E$对应的奇异单纯集.这给出函子
    \[
    \Sing : \cate{Top} \to \cate{sSet}.
    \]
\end{definition}
不难发现奇异集函子就正是奇异同调所使用的奇异复形.
\begin{theorem}\label{The:几何实现是奇异集函子的左伴随}
    几何实现是奇异集函子的左伴随,换言之,有一一对应
    \[\begin{tikzcd}
	{\Hom_{\cate{Top}}(|X|,E)} & {\Hom_{\cate{sSet}}(X,\Sing(E))} \\
	\varphi & {\left[X_n \xrightarrow{x\mapsto \varphi\circ i_{n,x}}\Hom_{\cate{Top}}(|\Delta^n|,E)\right]} \\
	{\underset{([n],\sigma)}{\indlim}\left(|\Delta^n| \xrightarrow{\psi_n(x)}E\right)  } & {\psi = [\psi_n : X_n \to \Hom_{\cate{Top}}(|\Delta^n|,E)]_{n\geq 0}}
	\arrow["{1:1}", tail reversed, from=1-1, to=1-2]
	\arrow[maps to, from=2-1, to=2-2]
	\arrow[maps to, from=3-2, to=3-1]
    \end{tikzcd}\]
    其中$X$为单纯集而$E$为拓扑空间.
\end{theorem}

\subsubsection{子结构}
在介绍 Kan 复形之前, 我们需要介绍几个单纯集的子结构, 这样我们才能描述它
\begin{definition}[尖角]
    对于$0\leq k \leq n$定义$\Delta^n$的子函子$\Lambda_k^n$为
    \[
    (\Lambda_k^n)_m := \{f\in \Hom([m],[n]), \Image(f) \not\supset [n]\setminus\{k\}\},m \in \Z_{\geq 0}
    \]
    对$k=0,n$时,分别称为左,右尖角,统称外尖角,而$1\leq k \leq n-1$时,称为内尖角.
\end{definition}
在 $n = 2$, $k = 0$ 时, 可以将标准 2-单形和 $\Lambda_0^2$ 表为
\[\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,240); %set diagram left start at 0, and has height of 240

%Shape: Free Drawing [id:dp20250857537916134] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (186.11,144.56) .. controls (186.11,144.56) and (186.11,144.56) .. (186.11,144.56) ;
%Shape: Free Drawing [id:dp8560192570653509] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (186.11,76.56) .. controls (186.11,76.56) and (186.11,76.56) .. (186.11,76.56) ;
%Shape: Free Drawing [id:dp26889850065743715] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (116.11,75.56) .. controls (116.11,75.56) and (116.11,75.56) .. (116.11,75.56) ;
%Straight Lines [id:da250770434621995] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (185.61,85.78) -- (186.57,131.78) ;
\draw [shift={(186.61,133.78)}, rotate = 268.81] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da5472503346326145] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (125.11,75.56) -- (171.11,75.56) ;
\draw [shift={(173.11,75.56)}, rotate = 180] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da15503202104425817] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (126.11,83.56) -- (177.7,135.14) ;
\draw [shift={(179.11,136.56)}, rotate = 225] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Polygon [id:ds5516763594874212] 
\draw  [draw opacity=0][fill={rgb, 255:red, 208; green, 2; blue, 27 }  ,fill opacity=0.3 ] (116.11,75.53) -- (186.11,75.53) -- (186.11,144.03) -- (116.11,75.53) -- cycle ;
%Shape: Free Drawing [id:dp735452156887185] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (510.11,148.11) .. controls (510.11,148.11) and (510.11,148.11) .. (510.11,148.11) ;
%Shape: Free Drawing [id:dp12785217588086462] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (510.11,81.11) .. controls (510.11,81.11) and (510.11,81.11) .. (510.11,81.11) ;
%Shape: Free Drawing [id:dp4480432189571355] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (441.11,80.11) .. controls (441.11,80.11) and (441.11,80.11) .. (441.11,80.11) ;
%Straight Lines [id:da8320855200603781] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (450.11,80.11) -- (496.11,80.11) ;
\draw [shift={(498.11,80.11)}, rotate = 180] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da24624276797536426] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (451.11,88.11) -- (502.7,139.7) ;
\draw [shift={(504.11,141.11)}, rotate = 225] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da36924497043702464] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=0.4 ] [dash pattern={on 4.5pt off 4.5pt}]  (510.11,91.78) -- (510.11,133.78) ;
\draw [shift={(510.11,135.78)}, rotate = 270] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=0.4 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

% Text Node
\draw (59,91.4) node [anchor=north west][inner sep=0.75pt]    {$\Delta ^{2} :$};
% Text Node
\draw (109,51.4) node [anchor=north west][inner sep=0.75pt]    {$0$};
% Text Node
\draw (180,49.4) node [anchor=north west][inner sep=0.75pt]    {$1$};
% Text Node
\draw (182,157.4) node [anchor=north west][inner sep=0.75pt]    {$2$};
% Text Node
\draw (394,89.4) node [anchor=north west][inner sep=0.75pt]    {$\Lambda _{0}^{2}$};
% Text Node
\draw (434,55.96) node [anchor=north west][inner sep=0.75pt]    {$0$};
% Text Node
\draw (505,53.96) node [anchor=north west][inner sep=0.75pt]    {$1$};
% Text Node
\draw (505,158.96) node [anchor=north west][inner sep=0.75pt]    {$2$};


\end{tikzpicture}\]
尖角的填充可以体现出态射的结合律以及态射的可逆性, 比如说考虑以下尖角 $\sigma \colon \Lambda_0^2 \to X$
\[\begin{tikzcd}
	& y \\
	x && x
	\arrow["f", from=2-1, to=1-2]
	\arrow["{\identity_x}"', from=2-1, to=2-3]
\end{tikzcd}\]
它进行填充所得到的结果就是 $f$ 的左逆. 再比如说考虑 $\sigma' \colon \Lambda_2^3 \to X$
\[\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Shape: Boxed Line [id:dp712419722419394] 
\draw [draw opacity=0][fill={rgb, 255:red, 208; green, 2; blue, 27 }  ,fill opacity=0.3 ]   (265.11,114.11) -- (366.11,113.11) -- (403.11,164.11) -- cycle ;
%Shape: Boxed Line [id:dp06884731912188236] 
\draw [draw opacity=0][fill={rgb, 255:red, 208; green, 2; blue, 27 }  ,fill opacity=0.3 ]   (265.11,114.11) -- (350.11,199.11) -- (403.11,164.11) -- cycle ;
%Shape: Free Drawing [id:dp01829448777195708] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (265.58,114.63) .. controls (265.58,114.63) and (265.58,114.63) .. (265.58,114.63) ;
%Shape: Free Drawing [id:dp6329653420526828] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (350.92,199.97) .. controls (350.92,199.97) and (350.92,199.97) .. (350.92,199.97) ;
%Shape: Free Drawing [id:dp6342498607996421] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (402.62,164.65) .. controls (402.62,164.65) and (402.62,164.65) .. (402.62,164.65) ;
%Straight Lines [id:da526633051382492] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (339.11,187.11) -- (277.55,127.5) ;
\draw [shift={(276.11,126.11)}, rotate = 44.08] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Free Drawing [id:dp44772844349269714] 
\draw  [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=6] [line join = round][line cap = round] (365.34,113.07) .. controls (365.34,113.07) and (365.34,113.07) .. (365.34,113.07) ;
%Straight Lines [id:da9429587691776815] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (393.11,171.11) -- (360.77,192.99) ;
\draw [shift={(359.11,194.11)}, rotate = 325.92] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da7210386732599512] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (283.1,113.83) -- (350.11,114.1) ;
\draw [shift={(352.11,114.11)}, rotate = 180.23] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da9610602919544413] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (353.11,187.11) -- (361.8,132.09) ;
\draw [shift={(362.11,130.11)}, rotate = 98.97] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da8120815388496025] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (391.11,160.11) -- (293.99,124.79) ;
\draw [shift={(292.11,124.11)}, rotate = 19.98] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da274468734769862] 
\draw [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ]   (395.11,154.11) -- (373.28,123.74) ;
\draw [shift={(372.11,122.11)}, rotate = 54.29] [color={rgb, 255:red, 208; green, 2; blue, 27 }  ,draw opacity=1 ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Boxed Line [id:dp5693420491484811] 
\draw [draw opacity=0][fill={rgb, 255:red, 208; green, 2; blue, 27 }  ,fill opacity=0.3 ]   (265.11,114.11) -- (366.11,113.11) -- (350.11,199.11) -- cycle ;

% Text Node
\draw (149.73,124.92) node [anchor=north west][inner sep=0.75pt]    {$\sigma ':\Lambda _{2}^{3}\rightarrow X$};
% Text Node
\draw (345,215.4) node [anchor=north west][inner sep=0.75pt]    {$y$};
% Text Node
\draw (415,168.4) node [anchor=north west][inner sep=0.75pt]    {$x$};
% Text Node
\draw (364,85.4) node [anchor=north west][inner sep=0.75pt]    {$w$};
% Text Node
\draw (378.11,186.01) node [anchor=north west][inner sep=0.75pt]    {$f$};
% Text Node
\draw (300,146.4) node [anchor=north west][inner sep=0.75pt]    {$g$};
% Text Node
\draw (313.43,120.38) node [anchor=north west][inner sep=0.75pt]  [rotate=-19.28]  {$g\circ f$};
% Text Node
\draw (318,92.4) node [anchor=north west][inner sep=0.75pt]    {$h$};
% Text Node
\draw (339.95,154.66) node [anchor=north west][inner sep=0.75pt]  [rotate=-6.42]  {$h\circ g$};
% Text Node
\draw (374.69,130.9) node [anchor=north west][inner sep=0.75pt]  [rotate=-357.41]  {$h\circ ( g\circ f)$};
% Text Node
\draw (261.02,84.17) node [anchor=north west][inner sep=0.75pt]    {$z$};


\end{tikzpicture}\]
此时填充给出结合律 $(h\circ g)\circ f \simeq h \circ (g \circ f)$, 此处为同伦的填充而非严格相等.
\subsection{同伦假设一瞥}
\begin{definition}[Kan复形]\label{定义:Kan 复形}
    令$X$为一个单纯集.若所有的尖角均可填充,即对于$0\leq i\leq n$以下图表
    \[\begin{tikzcd}
	{\Lambda_i^n} & X \\
	{\Delta^n}
	\arrow[from=1-1, to=1-2]
	\arrow[hook, from=1-1, to=2-1]
	\arrow[dashed, from=2-1, to=1-2]
    \end{tikzcd}\]
    交换.则称$X$为Kan复形.
\end{definition}
不难发现 Kan 复形就是长得像拓扑空间的单纯集, 或者说编码了拓扑空间的单纯集.
\begin{exercise}
    验证对于拓扑空间 $E$, 有 $\Sing(E)$ 为 Kan 复形.
\end{exercise}
由 Kan 复形, 可以给出单纯集上的 Kan-Quillen 模型结构(在此不妨理解为单纯集上以 Kan 复形为核心的同伦理论).而在代数拓扑中, 我们所使用的模型结构为 Quillen 模型结构.
我们有以下定理
\begin{theorem}[同伦假设]
    有 Quillen 等价
    \[\begin{tikzcd}
	{|-|} & {\cate{sSet}_{\op{Kan-Quillen}}} & {\cate{Top}_{\op{Quillen}}} & \Sing
	\arrow["\colon"{description}, draw=none, from=1-1, to=1-2]
	\arrow[shift left, from=1-2, to=1-3]
	\arrow[shift left, from=1-3, to=1-2]
	\arrow["\colon"{marking, allow upside down}, draw=none, from=1-4, to=1-3]
    \end{tikzcd}\]
\end{theorem}
\begin{remark}
    由此给出可表现 $\infty$-范畴的等价
    \[
    \cate{Top} \simeq \cate{An}.
    \]
\end{remark}
证明将放在第~\ref{抽象同伦论}~章.\\
因此, 只需要研究 Kan 复形就可以研究拓扑空间的全体信息, 我们也将 Kan 复形称为 $\infty$-群胚(事实上, 它只是 $\infty$-群胚的一个模型).
\subsection{局部 Kan 的单纯范畴}
由同伦假设, 可以将我们的重心从拓扑范畴变为``充实于'' Kan 复形的范畴, 此时 $\iHom(x,y)$ 中的 $1$-态射即为 Kan 复形中的 $0$-单形, $2$-态射即为 Kan 复形中的 $1$-单形.
\begin{definition}[单纯范畴]
    充实于 $\cate{sSet}$ 的范畴称为单纯范畴.
\end{definition}
\begin{definition}[局部 Kan]
    对于单纯范畴 $\mathcal{C}$, 若 $\iHom(x,y)$ 为 Kan 复形, 则称其为局部 Kan 的单纯范畴.
\end{definition}
不难发现, 局部 Kan 的单纯范畴就是我们所寻求的 $(\infty,1)$-范畴理论, 它的优点是我们容易自行的发现它.\\
在单纯范畴上, 我们有合适的模型结构, 详见\cite[\href{https://ncatlab.org/nlab/show/model+structure+on+sSet-categories}{Model structure on sSet-Categories}]{nlab:homepage}
\subsection{拟范畴}
但是单纯范畴操作起来不够方便, 并且高阶态射无法简洁地表现出来.\\
我们现在已经有一个足够好的表现同伦理论的工具---单纯集, 我们不妨试着用单纯集来描述范畴, 然后再使用单纯集寻找范畴和拓扑空间中的一个中间量(使得 1-单形不可逆而高阶态射可以良好表达且可逆的结构).\\
首先, 使用单纯集逼近范畴, 事实上, 我们只需要描述出严格的结合律:
\begin{definition}[范畴的脉]\label{定义:脉}\index{mai@脉 (nerve)}
    设$\mathcal{C}$为小范畴,由此定义函子
    \[
    \Delta^{\opposite} \to \cate{Set} , [n] \mapsto \{\text{所有函子}[n] \to \mathcal{C}\}
    \]
    如视为单纯集,则记为$\nerve \mathcal{C}$,称之为$\mathcal{C}$的脉.
\end{definition}
\begin{remark}
    脉的定义是可以推广到任意余完备范畴上的, 并且总是有一个实现与之对应, 这不是本节的主题,故不提.
\end{remark}
指定$\nerve \mathcal{C}_n$中的元素相当于指定函子$[n] \to \mathcal{C}$,即在$\mathcal{C}$中指定态射链
    \[
    (f_1,\cdots,f_n) : C_0 \xrightarrow{f_1} C_1 \xrightarrow{f_2} \cdots \xrightarrow{f_n}C_n;
    \]
因此$\nerve \mathcal{C}_0$可以等同于$\Obj(\mathcal{C})$,而$\nerve\mathcal{C}_1$可以等同于$\Mor(\mathcal{C})$.面态射$d_i : \nerve \mathcal{C}_n \to \nerve\mathcal{C}_{n-1}$和退化映射$s_j : \nerve \mathcal{C}_n \to \nerve\mathcal{C}_{n+1}$的映法是
\[
d_i(f_1,\cdots,f_n) = \left\{\begin{array}{ccc}
    &(f_2,\cdots,f_n), & i=0 \\
    &(\cdots,f_{i+1}\circ f_i,\cdots), & 0<i<n\\
    &(f_1,\cdots,f_{n-1}), & i=n
\end{array}\right.\]\[
s_j(f_1,\cdots,f_n) = \left\{\begin{array}{ccc}
    &(\identity_{C_0},f_1,\cdots,f_n), & i=0 \\
    &(\cdots,f_j,\identity_{C_j},f_{j+1},\cdots), & 0<i<n\\
    &(f_1,\cdots,f_{n},\identity_{C_n}), & i=n
\end{array}\right.
\]
脉是范畴通过组合/拓扑资料的具象化,它包含原范畴的全部信息.我们首先来刻画有哪些单纯集是脉,这与后文定义拟范畴息息相关.\\
我们可以说明
\begin{enumerate}
        \item 存在小范畴$\mathcal{C}$使得$\nerve \mathcal{C} \simeq X$.
        \item 其具备内尖角唯一填充性质,即对任意$0<i<n$以及态射$\sigma' : \Lambda_i^n \to X$,存在唯一的延拓$\sigma : \Delta^n \to X$使得以下图表
        \[\begin{tikzcd}
	{\Lambda_i^n} & X \\
	{\Delta^n}
	\arrow[from=1-1, to=1-2]
	\arrow[hook, from=1-1, to=2-1]
	\arrow[dashed, from=2-1, to=1-2]
        \end{tikzcd}\]
        交换.
\end{enumerate}
此处唯一填充表示严格的结合律, 读者不妨根据在尖角定义时给出的填充例子来体会这一点.\\
不难发现, 外尖角的填充性质表示态射可逆等条件, 因此若 1-态射不可逆, 则外尖角可逆这一条件是需要去掉的.\\
现在, 我们来寻找我们想要的介于拓扑空间和范畴之间的单纯集
首先考虑任意一个单纯集$X$.我们可以尝试着将$X$想象成一个范畴,首先$X$中的点(即$X_0$的元素)就是其对象,态射则为$X$中的边($X_1$中的对象).一个$2$-单形$\sigma : \Delta^2 \to X$应当被视为图表
\[\begin{tikzcd}
	& B \\
	A && C
	\arrow["\psi", from=1-2, to=2-3]
	\arrow["\phi", from=2-1, to=1-2]
	\arrow["\theta"', from=2-1, to=2-3]
\end{tikzcd}\]
以及$\theta$与$\psi \circ \phi$的同伦,这将被视为图表的``交换性''(在高阶范畴论中,交换性不仅仅是一个条件:同伦$\theta \simeq \psi \circ \phi$是额外的资料.)高阶单形可以被认为反映了高阶图表的交换性.\\

坏消息是,对于一般的单纯集$X$,上文的类比就略显乏力.这个问题的本质在于,哪怕我们可以把$X$中的$1$-单形视为态射,但是它们的合成却不总是存在.比如说取$\nerve \mathcal{C}$这个例子,对于态射$\theta : A\to C$,若存在一个$2$-单形$\sigma : \Delta^2 \to X$使得其表现为前文所示的交换图则称$\theta$为态射$\phi : X \to Y$与态射$\psi :Y \to Z$的合成.现在我们需要考虑两个潜在的问题:
\begin{itemize}
    \item 所需的$2$-单形$\sigma$不一定总是存在.
    \item 即使其存在也不一定唯一,即我们可能不止$\theta$一个选择.
\end{itemize}
存在性要求$\sigma$总是可以被表述为单纯集$X$的延拓条件.注意到可组合的态射偶$(\psi ,\phi)$事实上确定了一个单纯集间的映射$\Lambda_1^2 \to X$.因此,断言$\sigma$总是能够被表述为一个延拓条件:任意形如$\Lambda_1^2 \to X$的单纯形间的映射都可以延拓到$\Delta^2$上,归结为以下图表
\[\begin{tikzcd}
	{\Lambda_1^2} & K \\
	{\Delta^2}
	\arrow[from=1-1, to=1-2]
	\arrow[hook, from=1-1, to=2-1]
	\arrow[dashed, from=2-1, to=1-2]
\end{tikzcd}\]
而$\theta$的唯一性又是另一个问题.事实证明要求$\theta$被唯一确定是不必要(并且不自然)的.为了说明这一点,让我们回到例\ref{Exp:群胚}上.对于群胚中的两条道路,若它们同伦则被认为是等价的.基本群胚中,复合是由道路的合成给出的,即给定道路$q,p : [0,1] \to X$使得$p(0) = x$而$p(1)=q(0) = y$,且$q(1) = z$,则$p$与$q$的复合应当为一条连接$x$与$z$的道路.有很多方法得到这样连接$p$与$q$的道路.最简单的方式无非是
\[
r(t) = \left\{\begin{array}{cc}
     p(2t)&\text{若}0\leq t \leq \frac{1}{2}  \\
     q(2t-1)&\text{若}\frac{1}{2}\leq t\leq 1. 
\end{array}\right.
\]
然而,同样可以使用以下方式进行合成
\[
r'(t) = \left\{\begin{array}{cc}
   p(3t)  & \text{若} 0\leq t \leq \frac{1}{3} \\
   q(\frac{3t-1}{2})& \text{若} \frac{1}{3}\leq t\leq 1.
\end{array}\right.
\]
由于$r$与$r'$是同伦的,因此这并不妨碍选取.\\
但是从$2$-范畴的角度上进行考虑时,这个问题就变得复杂了.考虑拓扑空间$E$的基本2-群胚,为使得态射的合成有明确的定义,我们必须选择一个等式来代替全部等式.此外,这并没有一个特别合适的选择.举个例子,前文所述的两个等式都无法表示严格的结合律.\\
这个教训给我们带来了一个启发:在高阶范畴处,我们不应该要求两个态射具有唯一确定的组合(即唯一的填充).在基本群胚的例子中,道路的复合有许多种选择,但是它们是相互同伦的.此外,根据高阶范畴论的哲学原理:任何与复合同伦的道路都应当与复合本身一样好.从这一点出发,我们应当将复合视为一种关系而非函数,这在单纯集的形式中可以很好地得到展现:一个2-单形$\sigma :\Delta^2 \to X$应当被视为$d_0(\sigma) \circ d_2(\sigma)$同伦于$d_1(\sigma)$的``证据''.\\

那么具体是什么样的条件才能够保证一个单纯集$X$表现得像一个更高阶的范畴呢?基于前文的讨论,我们发现这只需要让$X$满足对于尖角$\Lambda_i^n$的填充性质,但是根据前文讨论可知只需要对于内尖角进行填充即可.因此得到定义
\begin{definition}[拟范畴]\label{定义:无穷范畴}
    拟范畴是一个满足以下性质的单纯集$X$:对任意的$0<i<n$以及任意单纯集间的映射$\Lambda_i^n \to X$,都可以填充为$f: \Delta^n \to K$.
\end{definition}
此时对于拟范畴 $\mathcal{C}$ 中的 $0$-单形(或者说对象) $x,y \in \mathcal{C}$, 容易发现 $\Hom(x,y)$ 为拉回
\[\begin{tikzcd}
	{\Hom(x,y)} & {\Fct(\Delta^1,\mathcal{C})} \\
	{*} & {\mathcal{C}\times \mathcal{C}}
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow["{(x,y)}"', from=2-1, to=2-2]
\end{tikzcd}\]
不难说明其为 $\infty$-群胚, 也就是说我们确实定义出了一个 $(\infty,1)$-范畴.\\
拟范畴也具有模型结构, 称为 Joyal 模型结构, 我们可以给出 Joyal 模型结构与单纯范畴上那个模型结构的 Quillen 等价.
\subsection{模型无关}
我们可以试着以公理化的方式定义 $\infty$-范畴, 当然此时我们一般称其为综合范畴, 感兴趣的读者可见\cite{CisinskiFormalization}.
(未完待续)
\section{方便的空间范畴}
本节来讲述方便的空间范畴概念, 一般来说, 方便的空间范畴指的是拓扑空间范畴中满足以下条件的饱和\footnote{replete, 子范畴 $\cal{D}$ 称为是饱和的, 指对于任意 $x\in \cal{D}$, 若在 $\cal{C}$ 中有 $f \colon y \simeq x$, 则 $f$ 和 $y$ 都在 $\cal{D}$ 中.}全子范畴. 本节主要参考\cite{StricklandCGWH}以及\cite[7.好用的空间范畴]{李思}
\begin{definition}[方便的空间范畴]
    称 $\cal{C}$ 为\textbf{方便的空间范畴}, 指其为 $\cate{Top}$ 的饱和全子范畴, 并且满足以下三条条件
    \begin{itemize}
        \item 每个 CW 复形均为 $\cal{C}$ 中的对象.
        \item $\cal{C}$ 是 Cartesian 闭的(定义~\ref{定义:Cartesian闭}, 或者说具有指数律).
        \item $\cal{C}$ 是完备且余完备的.
    \end{itemize}
\end{definition}
首先介绍闭幺半范畴的概念
\begin{definition}[闭幺半范畴]
    设$\mathcal{C}$为幺半范畴.当以下条件成立时,称$\mathcal{C}$为右(或左)闭幺半范畴:对所有对象$Y$,函子$ - \otimes Y : \mathcal{C} \to \mathcal{C}$(或$Y\otimes - : \mathcal{C} \to \mathcal{C}$)带有指定的右伴随.兼具左闭和右闭的幺半范畴称为闭幺半范畴.
\end{definition}
\begin{remark}
    我们考虑的幺半范畴均为辫幺半范畴,因此无需区分左闭右闭,此时$- \otimes Y$的右伴随记为$\underline{\Hom}(Y,-)$.
\end{remark}
一般而言,对任意范畴$\mathcal{C}_1$和$\mathcal{C}_2$之间的两对伴随函子$(F,G)$和$(F',G')$,任何$\varphi :F \to F'$都自然诱导了$\psi : G' \to G$.相反也是如此.诱导态射由交换图表
\[\begin{tikzcd}
	{\Hom(F'X,Y)} & {\Hom(X,G'Y)} \\
	{\Hom(FX,Y)} & {\Hom(X,GY)}
	\arrow["\sim"', from=1-1, to=1-2]
	\arrow["{(\varphi_X)^*}", from=1-1, to=2-1]
	\arrow["{(\psi_Y)_*}"', from=1-2, to=2-2]
	\arrow["\sim", from=2-1, to=2-2]
\end{tikzcd}\]
刻画.\\

作为应用,闭幺半范畴中的任何态射$Y \to Y'$诱导$\underline{\Hom}(Y', -)\to \underline{\Hom}(Y, -)$,所以闭幺半范畴的性质相当于在说存在双函子$\underline{\Hom}(-,-):\mathcal{C}^{\opposite} \times \mathcal{C} \to \mathcal{C}$以及一族典范双射
\begin{equation}\label{公式:内 Hom}
\tag{内 Hom}
   \Hom(X\otimes Y,Z) \simeq \Hom\left(X,\underline{\Hom}(Y,Z)\right), 
\end{equation}

它对于三个变元皆有函子性.\\

双函子$\underline{\Hom}(-,-)$也称为闭幺半范畴$\mathcal{C}$的内Hom.定义导致以下结论:
\begin{itemize}
    \item $\Hom(X,Z) \simeq \Hom(X\otimes \one,Z) \simeq \Hom(X,\underline{\Hom}(\one,Z))$,再由米田引理可知$Z \simeq \underline{\Hom}(\one,Z)$.
    \item 伴随对的单位态射给出$\coev_{X,Y}:X\to  \underline{\Hom}(Y,X\otimes Y)$,余单位态射给出$\ev_{Y,X}:\underline{\Hom}(Y,X)\otimes Y \to X$.
    \item 从合成
    \[\underline{\Hom}(Y,Z)\otimes(\underline{\Hom}(X,Y)\otimes X) \xrightarrow{\identity\otimes\ev_{X,Y}}\underline{\Hom}(Y,Z)\otimes Y\xrightarrow{\ev_{Y,Z}}Z\]
    以及伴随性质和结合约束可得
    \[
    \underline{\Hom}(Y,Z)\otimes\underline{\Hom}(X,Y)\to \underline{\Hom}(X,Z).
    \]
    \item 取$\coev_{\one,X}$得$\one \to \underline{\Hom}(X,X)$.
\end{itemize}
不难得到
\begin{proposition}
    设$\mathcal{C}$是闭幺半范畴,则有一族典范双射
    \[
    \Hom(X,Y) \simeq \Hom(\one,\underline{\Hom}(X,Y)),\quad X,Y \in \Obj(\mathcal{C}).
    \]
\end{proposition}
这说明内Hom可以得到Hom.\\

此外,伴随也可以内化到$\mathcal{C}$.
\begin{proposition}
    设$\mathcal{C}$是闭幺半范畴,则有一族同构
    \[
    \underline{\Hom}(X\otimes Y,Z)\simeq \underline{\Hom}(X,\underline{\Hom}(Y,Z));
    \]
    更精确地说,这是从$\mathcal{C}^{\opposite}\times \mathcal{C}^{\opposite}\times \mathcal{C} \to \mathcal{C}$的函子间的同构.
\end{proposition}
\begin{proof}
    考虑$\Hom(T,\underline{\Hom}(X\otimes Y,Z))$利用结合约束以及伴随同构证明
    \[\Hom(T,\underline{\Hom}(X\otimes Y,Z))\rightiso \Hom(T,\underline{\Hom}(X,\underline{\Hom}(Y,Z)))
    \]
    结合Yoneda引理可知结果.
\end{proof}
引入闭幺半范畴是为了进一步约化到双函子$\otimes$为积$\times$的情况,在这一情况下,会增加一个有趣的观察.
\begin{definition}[Cartesius闭]\label{定义:Cartesian闭}
    设$\mathcal{C}$是具备有限积的范畴.如果$(\mathcal{C},\times)$为闭幺半范畴,则称$\mathcal{C}$为Cartesius闭的. 此时内 Hom 称为\textbf{指数对象}, 在拓扑中, 我们称其满足指数律.
\end{definition}
\begin{example}
\begin{enumerate}
    \item 集合范畴$\cate{Set}$是Cartesius闭的:取$\underline{\Hom}(X,Y) = Y^X$即可.
    \item 取$\mathcal{C} = \cate{Top}$,它具有许多良好性质,并且对积$\times$构成对称幺半范畴,但是它不是 Cartesian 闭的.
    \item 考虑全体小范畴构成的范畴$\cate{Cat}$,其中积为$\cal{C}_1\times \cdots \cal{C}_n$,而空积为$\bold{1}$.范畴$\cate{Cat}$是 Cartesian 闭的,这来自于以下简单的论断:指定双函子$\cal{A} \times \cal{B} \to \cal{C}$相当于指定函子$\cal{A} \to \cal{C}^{\cal{B}}$也相当于指定函子$\cal{B} \to \cal{C}^{\cal{A}}$.
\end{enumerate}
\end{example}
由于映射空间在拓扑学中俯拾即是,为解决$\cate{Top}$不是 Cartesian 闭的问题,我们引入紧生成空间与紧生成弱 Hausdorff 空间.两者都是方便的空间范畴,在$\infty$-范畴理论中,使用紧生成弱 Hausdorff 空间更多一些.\\
首先,回顾一下紧生成空间的定义,根据Bourbaki的定义,紧空间意谓紧且Hausdorff的空间.
\begin{definition}[弱Hausdorff]\label{定义:弱Hausdorff}
    设$X$为拓扑空间, $K$为紧空间,若对于任意连续映射$f: K \to X$都有$f(K)$是$X$中的闭集,则称$X$是弱Hausdorff的.
\end{definition}
\begin{example}
    Hausdorff空间是弱 Hausdorff 的.
\end{example}
这种空间的分离性介于T$_1$与Hausdorff之间.
\begin{definition}[紧闭子空间]\label{定义:紧闭子空间}
    设$X$为拓扑空间, $A \subset X$为其子空间, $K$为紧空间,若对于任意映射$f : K \to X$都有$f^{-1}(A)$为$K$中的闭集,则称$A$是$X$的紧闭子空间.\footnote{注意,不一定在$X$上闭}
\end{definition}
\begin{definition}[Kelly空间]
    设$X$为拓扑空间,若其每个紧闭子空间在$X$上都是闭的,则称$X$为Kelly空间,简称$k$-空间.
\end{definition}
\begin{definition}[紧生成空间]\label{定义:紧生成空间}
    设$X$为拓扑空间,以$X$中的紧闭子集作为闭集构成一个新的拓扑空间$kX$,有恒等映射$kX \to X$.若$kX = X$,则称$X$是紧生成的.记$\cate{CG}$为$\cate{Top}$中所有紧生成空间构成的范畴,当然也可以说是$k$-空间构成的范畴.
\end{definition}
\begin{proposition}\label{命题:紧生成化与嵌入函子伴随}
    由$X \mapsto kX$给出的函子$k : \cate{Top} \to \cate{CG}$是嵌入函子$\iota: \cate{CG} \to \cate{Top}$的右伴随.
\end{proposition}
\begin{proof}
    记$X \in \cate{CG}$, $Y\in \cate{Top}$,欲证
    \[
    \Hom_{\cate{CG}}(X,kY)\simeq \Hom_{\cate{Top}}(\iota X,Y),
    \]
    只需证明$f : X \to Y$连续当且仅当$f : X \to kY$连续即可.
    \begin{enumerate}
        \item[($\Rightarrow$)]假设$f: X\to Y$连续,则令$Z \subset Y$为紧闭子集考虑$f^{-1}(Z)$.对任意紧空间$K$,映射$g: K \to X$,由于$f\circ g : K \to Y$,因此$(f\circ g)^{-1}(Z)$在$K$中是闭的,这意味着$f^{-1}(Z)$为$X$中的紧闭子集,而$X$为紧生成空间,即$f^{-1}(Z)$在$X$中闭,从而$kY$中的闭集在$f$的逆像为$X$中的闭集从而$f: X \to kY$连续.
        \item[($\Leftarrow$)]由于$kY \to Y$连续,因此考虑复合即可.
    \end{enumerate}
\end{proof}
\begin{proposition}\label{Pro:紧生成空间商映射}
    若$X \in \cate{CG}$, $\pr: X\to Y$为商映射,则$Y\in \cate{CG}$.
\end{proposition}
\begin{proof}
    由于商映射为使得$\pr : X \to Y$连续的最细的映射且有分解$\pr : X \to kY \to Y$,因此$Y = kY$.
\end{proof}
\begin{theorem}[$\cate{CG}$的完备性]
    范畴$\cate{CG}$完备且余完备.其余极限继承相应空间在$\cate{Top}$中的余极限,而极限由$k$作用于相应空间在$\cate{Top}$中的极限得到.
\end{theorem}
\begin{proof}
    设$\mathcal{I}$为指标范畴, $F \in \Fct(\mathcal{I},\cate{CG})$, $\hat{F} = \iota \circ F$.由于$\iota$为左伴随,保$\indlim$,因此只需要证明$\cate{CG}$中对象在$\cate{Top}$的余极限仍在$\cate{CG}$中即可,由于命题\ref{Pro:紧生成空间商映射},只需要证明$\bigsqcup_{i\in \mathcal{I}}F(i)$在$\cate{CG}$中即可,这是显然的.而后由于$k$为右伴随,因此保$\prolim$,即
    \[
    \underset{i\in \mathcal{I}}{\prolim} F(i) = \underset{i\in \mathcal{I}}{\prolim} (k\circ \hat{F}(i)) = k \underset{i\in \mathcal{I}}{\prolim} \hat{F}(i).
    \]
\end{proof}
\begin{corollary}
    令$\{X_i\}_{i\in I}$为$\cate{CG}$中的一族对象.则它们在$\cate{CG}$中的乘积为
    \[
     k(\prod_{i\in I}X_i)
    \]
    此处$\prod_{i\in I}X_i$为在拓扑空间中的乘积.
\end{corollary}
\begin{definition}[紧生成弱Hausdorff空间]\label{Def:紧生成弱Hausdorff空间}
    设$X$为拓扑空间,若其是弱Hausdorff的$k$-空间,则称其为紧生成空间,其构成的范畴记为$\cate{CGWH}$.
\end{definition}
\begin{proposition}
    设$X$为弱Hausdorff空间, $K$为紧空间,若$f : K \to X$连续,则$f(K)$为紧空间.
\end{proposition}
\begin{proof}
    由于$K$紧且$X$弱Hausdorff,由定义即知$f(K)$闭,而由连续映射保持紧性知$f(K)$紧,此外得知$f$为闭映射.而后考虑$x_1,x_2 \in f(K)$由于$X$为弱Hausdorff空间, $\{x_1\}$和$\{x_2\}$为闭子集,因此考虑其逆像得知$f^{-1}(x_1)$与$f^{-1}(x_2)$无交,而$K$紧Hausdorff,从而存在$U_1,U_2$为$K$中开集使得$f^{-1}(x_1)\in U_1$而$f^{-1}(x_2)\in U_2$,即$x_2\in K-U_1$而$x_1 \in K-U_2$.考虑$f(K) - f(K-U_i)$($i=1,2$)便得到包含$x_1$和$x_2$的无交开集.
\end{proof}
\begin{proposition}
    设$X$为紧生成空间,则$X$弱Hausdorff当且仅当对角线子空间$\delta_X$在$X\times X$中闭,此处$X \times X$为$\cate{CG}$中的乘积.
\end{proposition}
\begin{proof}
    设$X \in  \cate{CGWH}$,现证$\delta_X$紧闭.考虑
    \[
    f=(f_1,f_2) : K \to X\times X, f_i : K \to X
    \]
    $K$为紧空间,记
    \[
    L = f_1(K) \cap f_2(K)
    \]
    可知$L$为紧空间.考虑对角线$\delta_L$,由于$L$为紧空间, $\delta_L$为$X\times X$的紧子空间,而$X$紧生成,因此$\delta_L$在$X\times X$中闭.即$f^{-1}(\delta_X) = f^{-1}(\delta_L)$闭.\\
    反过来只需证明若$K$为紧空间$f: K\to X$连续,则$f(K)$紧闭即可.不妨设$L$为紧空间, $g: L \to X$连续,考虑
    \[
    (f,g): K \times L \to X\times X.
    \]
    则
    \[
    g^{-1}(f(K)) = (f,g)^{-1}(\delta_X)
    \]
    为闭集,即$f(K)$紧闭.
\end{proof}
\begin{corollary}\label{Cor:CG乘积也在CGWH中}
    设$\{X_i\}$为$\cate{CGWH}$中的一族对象,则它们在$\cate{CG}$的乘积也在$\cate{CGWH}$中.
\end{corollary}
\begin{proposition}
    函子$h : \cate{CG} \to \cate{CGWH}$是嵌入$\iota': \cate{CGWH}\to \cate{CG}$的左伴随.
\end{proposition}
\begin{theorem}[$\cate{CGWH}$的完备性]\label{The:CGWH的完备性}
    范畴$\cate{CGWH}$完备且余完备.极限继承自$\cate{CG}$而余极限来自$h$作用于$\cate{CG}$.
\end{theorem}
\begin{proof}
    与$\cate{CG}$完备且余完备的证明是类似的.唯一不平凡的是需要使用推论\ref{Cor:CG乘积也在CGWH中}即可得知乘积存在,而后由范畴中构造极限的方式可以证明极限确实继承自$\cate{CG}$.
\end{proof}
\begin{proposition}
    $\cate{CGWH}$是 Cartesian 闭的.
\end{proposition}
\begin{proof}   
见\parencite[Proposition 2.12]{StricklandCGWH}
\end{proof}